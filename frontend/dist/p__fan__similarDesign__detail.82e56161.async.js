(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[5088],{38733:function(G){G.exports={inputNum1:"inputNum1___2d0dz",card:"card___1xKAg",formItem:"formItem___2d0Uf",formItem1:"formItem1___ven9J",tableSearch:"tableSearch___2N2oW",alarm:"alarm___ZBXa4",select:"select___2rwl3",cardBody:"cardBody___22THb",cardBody1:"cardBody1___271NY",draggableCollapse:"draggableCollapse___dbUai",siteInputGroupWrapper:"siteInputGroupWrapper____nWpD",siteInputSplit:"siteInputSplit___3NJgC",siteInputRight:"siteInputRight___2Fjnt","ant-input-rtl":"ant-input-rtl___4H3Tt",inputGroupCompact:"inputGroupCompact___1QMzi"}},24323:function(G,T,t){"use strict";t.d(T,{NC:function(){return q},Cp:function(){return V},rU:function(){return ee}});var q=["\u6D41\u91CF(m3/s)","\u538B\u529B(Pa)","\u9759\u538B(Pa)","\u98CE\u673A\u6548\u7387(%)","\u9759\u538B\u6548\u7387(%)","\u8F74\u529F\u7387(kW)","\u8F6C\u901F(r/min)","\u76F4\u5F84(mm)","\u566A\u97F3(dB(A))","\u6BD4\u8F6C\u901F","u","\u6D41\u91CF\u7CFB\u6570","\u538B\u529B\u7CFB\u6570"],V=["flowRate","fullPressure","staticPressure","fanEff","staticPressureEff","shaftPower","motorSpeed","impellerDiameter","noise","specificSpeed","u","flowCoefficient","pressureCoefficient"],ee={"\u6D41\u91CF(m3/s)":"flowRate","\u538B\u529B(Pa)":"fullPressure","\u9759\u538B(Pa)":"staticPressure","\u98CE\u673A\u6548\u7387(%)":"fanEff","\u9759\u538B\u6548\u7387(%)":"staticPressureEff","\u8F74\u529F\u7387(kW)":"shaftPower","\u8F6C\u901F(r/min)":"motorSpeed","\u76F4\u5F84(mm)":"impellerDiameter","\u566A\u97F3(dB(A))":"noise",\u6BD4\u8F6C\u901F:"specificSpeed",u:"u",\u6D41\u91CF\u7CFB\u6570:"flowCoefficient",\u538B\u529B\u7CFB\u6570:"pressureCoefficient"}},8542:function(G,T,t){"use strict";t.r(T);var q=t(58024),V=t(91894),ee=t(88983),H=t(47933),ct=t(48736),J=t(27049),O=t(11849),vt=t(77883),A=t(85986),pt=t(43358),Se=t(34041),Et=t(13062),h=t(71230),Pt=t(89032),u=t(15746),Dt=t(57663),te=t(71577),ht=t(9715),E=t(55843),gt=t(34792),Oe=t(48086),f=t(2824),Mt=t(402),y=t(56256),d=t(67294),ae=t(21010),Fe=t(11075),je=t(47302),Ze=t(78448),le=t.n(Ze),re=t(32228),m=t(99448),se=t(52897),Be=t(952),Ie=t(91283),Te=t(19630),Ae=t(38733),ie=t.n(Ae),j=t(24323),e=t(85893);je.registerTransform(le().transform.regression);var ye={labelCol:{span:12},wrapperCol:{span:12}},Ue=y.Z.Title,we=function(Rt){var U=(0,Te.TH)(),Z;U.state==null?window.location.replace("/fan/2"):Z=U.state.model;var We=(0,d.useState)(U.state?U.state:{type:"",limitField:"unLimited"}),ne=(0,f.Z)(We,2),l=ne[0],oe=ne[1],Le=(0,d.useState)({}),ue=(0,f.Z)(Le,2),$=ue[0],Ke=ue[1],be=(0,d.useState)({}),de=(0,f.Z)(be,2),Ne=de[0],_e=de[1],ze=(0,d.useState)([]),me=(0,f.Z)(ze,2),fe=me[0],Ge=me[1],Ve=function(){return Ne};(0,d.useEffect)(function(){if(Z){(0,re.LU)(Z).then(function(i){$e(i.data),w(l.impellerDiameterMedian?l.impellerDiameterMedian:i.data.impellerDiameter),De(l.sortMotorSpeed?l.sortMotorSpeed:i.data.motorSpeed)}).catch(function(i){console.log("error"),console.log(i),Oe.default.error("\u8BF7\u6C42\u5931\u8D25\uFF01")}),(0,re.A3)(Z).then(function(i){console.log("queryFansPerfData res.data"),console.log(i.data),Ke(i.data),_e(i.data)});var v=sessionStorage.getItem("expect");v&&Xe(JSON.parse(v))}},[]);var He=(0,d.useRef)(),Je=(0,d.useState)({}),ce=(0,f.Z)(Je,2),s=ce[0],$e=ce[1],Qe=(0,d.useState)(),ve=(0,f.Z)(Qe,2),n=ve[0],Xe=ve[1],Ye=(0,d.useState)(l.type),pe=(0,f.Z)(Ye,2),g=pe[0],ke=pe[1],qe=(0,d.useState)(l.impellerDiameterMedian),Ee=(0,f.Z)(qe,2),B=Ee[0],w=Ee[1],et=(0,d.useState)(s.motorSpeed),Pe=(0,f.Z)(et,2),W=Pe[0],De=Pe[1],tt=(0,d.useState)(),he=(0,f.Z)(tt,2),c=he[0],ge=he[1],at=function(i){ke(i)},lt=E.Z.useForm(),rt=(0,f.Z)(lt,1),st=rt[0],it=(0,d.useState)({impellerDiameter:1,motorSpeed:1}),Me=(0,f.Z)(it,2),L=Me[0],nt=Me[1],ot=function(i,o,p,R){console.log("@@@@@@@computeSimilarDesign");var x=L.impellerDiameter,S=L.motorSpeed,r={};if(r.flowRate=R.flowRate,r.fullPressure=R.fullPressure,r.staticPressure=R.staticPressure,r.shaftPower=R.shaftPower,i[0]=="1"&&(x=o/R.impellerDiameter),i[1]=="1"&&(S=p/R.motorSpeed),Object.keys($).length!=0){var X=$,a={};for(var K in X){a[K]=[];for(var Y=0;Y<X[K].length;Y++)a[K].push(X[K][Y])}if(i[0]=="1"&&o!=null)for(var b=x,P=0;P<a.flowRate.length;P++)a.flowRate[P]=(0,m.FE)(a.flowRate[P]*Math.pow(b,3),3),a.fullPressure[P]=(0,m.FE)(a.fullPressure[P]*Math.pow(b,2),1),a.staticPressure[P]=(0,m.FE)(a.staticPressure[P]*Math.pow(b,2),1),a.shaftPower[P]=(0,m.FE)(a.shaftPower[P]*Math.pow(b,5),1);if(i[1]=="1"&&p!=null){console.log("type[1] == '1'");for(var N=S,D=0;D<a.flowRate.length;D++)a.flowRate[D]=(0,m.FE)(a.flowRate[D]*Math.pow(N,1),3),a.fullPressure[D]=(0,m.FE)(a.fullPressure[D]*Math.pow(N,2),1),a.staticPressure[D]=(0,m.FE)(a.staticPressure[D]*Math.pow(N,2),1),a.shaftPower[D]=(0,m.FE)(a.shaftPower[D]*Math.pow(N,3),1)}for(var Re=[],_=0;_<a.flowRate.length;_++)Re.push({flowRate:a.flowRate[_],fullPressure:a.fullPressure[_],staticPressure:a.staticPressure[_],fanEff:a.fanEff[_],staticPressureEff:a.staticPressureEff[_],shaftPower:a.shaftPower[_],motorSpeed:a.motorSpeed[_],impellerDiameter:a.impellerDiameter[_],noise:a.noise[_],specificSpeed:a.specificSpeed[_],u:a.u[_],flowCoefficient:a.flowCoefficient[_],pressureCoefficient:a.pressureCoefficient[_]});var F=l.pressureField;if(l.limitField=="flowRate"){for(var xe=[],z=0;z<a.flowRate.length;z++)xe.push([a.flowRate[z],a[F][z]]);var ft=le().regression("polynomial",xe,2),k=ft.parameter;r.motorSpeed=p,r.impellerDiameter=l.impellerDiameterMedian,r.flowRate=(0,m.FE)(l.flowRate,3),r[F]=(0,m.FE)(k[2]*Math.pow(r.flowRate,2)+k[1]*r.flowRate+k[0],0),ge(r)}else l.limitField=="unLimited"&&(i[0]=="1"&&(x=o/R.impellerDiameter,r.motorSpeed=p,r.impellerDiameter=o,r[F]=r[F]*Math.pow(x,2),r.flowRate=r.flowRate*Math.pow(x,3),r.shaftPower=r.shaftPower*Math.pow(x,5)),i[1]=="1"&&(S=p/R.motorSpeed,r.impellerDiameter=o,r.motorSpeed=p,r[F]=r[F]*Math.pow(S,2),r.flowRate=r.flowRate*Math.pow(S,1),r.shaftPower=r.shaftPower*Math.pow(S,3)));for(var I in r)I=="flowRate"?r[I]=(0,m.FE)(r[I],3):r[I]=(0,m.FE)(r[I],2);nt({impellerDiameter:x,motorSpeed:S}),ge(r),_e(a),Ge(Re)}},Ce=function(i){console.log("\u76F8\u4F3C\u7CFB\u6570"),console.log(i)};(0,d.useEffect)(function(){ot(g,B,W,s)},[g,B,W,$]);var ut=[{key:"1",name:"\u6D41\u91CF(m\xB3/s)",origin:s==null?void 0:s.flowRate,similar:c==null?void 0:c.flowRate,expect:n==null?void 0:n.flowRate},{key:"2",name:l.pressureField=="fullPressure"?"\u5168\u538B(N)":"\u9759\u538B(N)",origin:l.pressureField=="fullPressure"?s==null?void 0:s.fullPressure:s==null?void 0:s.staticPressure,similar:l.pressureField=="fullPressure"?c==null?void 0:c.fullPressure:c==null?void 0:c.staticPressure,expect:n==null?void 0:n.pressure},{key:"3",name:"\u8F74\u529F\u7387(kW)",origin:s==null?void 0:s.shaftPower,similar:"/",expect:n==null?void 0:n.usefulWork},{key:"4",name:"\u8F6C\u901F(r/min)",origin:s==null?void 0:s.motorSpeed,similar:c==null?void 0:c.motorSpeed,expect:n==null?void 0:n.motorSpeed}],dt=[{title:"\u53C2\u6570",dataIndex:"name"},{title:"\u539F\u578B\u673A",dataIndex:"origin"},{title:"\u76F8\u4F3C\u8BBE\u8BA1",dataIndex:"similar"},{title:"\u8BBE\u8BA1\u8981\u6C42(\u6807\u6001)",dataIndex:"expect"},{title:"\u8BBE\u8BA1\u504F\u5DEE\u503C",dataIndex:"deviation",hideInTable:g=="00",render:function(i,o){var p=(0,m.FE)(o.similar-o.expect,3);return g=="00"?null:isNaN(p)?"/":p>=0?(0,e.jsx)(y.Z.Text,{type:"success",children:p}):(0,e.jsx)(y.Z.Text,{type:"warning",children:p})}}],_t=(0,d.useRef)(),Q=[],M=[];for(var mt in j.rU)M.push(mt.toString());for(var C=0;C<M.length;C++)["specificSpeed","u","flowCoefficient","pressureCoefficient"].includes(j.rU[M[C]])||(["flowRate","fullPressure","staticPressure","shaftPower","impellerDiameter"].includes(j.rU[M[C]])?Q.push({title:M[C],dataIndex:j.rU[M[C]],valueType:"digit",width:80,render:function(i,o){return(0,e.jsx)(y.Z.Text,{type:"success",children:i})}}):Q.push({title:M[C],dataIndex:j.rU[M[C]],valueType:"digit",width:80}));return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(V.Z,{className:ie().formItem,title:"\u76F8\u4F3C\u8BBE\u8BA1\u8FC7\u7A0B",extra:[(0,e.jsx)(h.Z,{gutter:16,justify:"space-around",align:"middle",children:(0,e.jsx)(u.Z,{children:(0,e.jsx)(te.Z,{onClick:function(){ae.m8.push("/fan/2")},children:(0,e.jsx)(Fe.Z,{style:{color:"rgb(24, 144, 255)",fontSize:24}})})})})],children:[(0,e.jsx)(h.Z,{gutter:16,justify:"start",align:"middle",children:(0,e.jsx)(Ue,{level:5,children:(0,e.jsx)(u.Z,{children:"\u8F93\u5165\u8BBE\u8BA1\u53C2\u6570"})})}),(0,e.jsx)(Be.ZP,(0,O.Z)((0,O.Z)({id:"form"},ye),{},{form:st,layout:"horizontal",submitter:!1,onValuesChange:function(i){for(var o in i)o=="impellerDiameter"&&w(i[o]),o=="motorSpeed"&&De(i[o])},children:(0,e.jsx)(h.Z,{gutter:16,align:"middle",justify:"start",children:(0,e.jsxs)(u.Z,{span:24,children:[(0,e.jsxs)(h.Z,{style:{marginBottom:8},justify:"start",children:[(0,e.jsx)(u.Z,{span:6,children:(0,e.jsx)(E.Z.Item,{label:"\u76F8\u4F3C\u8BBE\u8BA1\u7C7B\u578B",children:(0,e.jsx)(Se.Z,{style:{width:"100%"},value:g,onChange:at,options:[{value:void 0},{value:"10",label:"\u53F6\u8F6E\u5C3A\u5BF8"},{value:"01",label:"\u8F6C\u901F"},{value:"11",label:"\u53F6\u8F6E\u5C3A\u5BF8+\u8F6C\u901F"}]})})}),(0,e.jsx)(u.Z,{span:8,children:l.impellerDiameterRange&&g[0]=="1"?(0,e.jsxs)(E.Z.Item,{label:"\u53F6\u8F6E\u5C3A\u5BF8\u8303\u56F4",children:[l.impellerDiameterRange[0],"mm~",l.impellerDiameterRange[1],"mm"]}):null}),(0,e.jsx)(u.Z,{span:10,children:l.motorSpeedRange?(0,e.jsxs)(E.Z.Item,{label:"\u8F6C\u901F\u8303\u56F4",children:[l.motorSpeedRange[0],"mm~",l.motorSpeedRange[1],"mm"]}):null})]}),g[0]!="1"?null:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(h.Z,{style:{marginBottom:8},justify:"space-between",children:[(0,e.jsx)(u.Z,{span:6,children:(0,e.jsxs)(E.Z.Item,{label:"\u539F\u53F6\u8F6E\u5C3A\u5BF8",children:[s==null?void 0:s.impellerDiameter,"mm"]})}),(0,e.jsx)(u.Z,{span:8,children:(0,e.jsx)(E.Z.Item,{label:"\u8C03\u6574\u53F6\u8F6E\u5C3A\u5BF8",name:"impellerDiameter",initialValue:l.impellerDiameterMedian?l.impellerDiameterMedian:s==null?void 0:s.impellerDiameter,children:(0,e.jsx)(A.Z,{min:l.limitField=="flowRate"?l.impellerDiameterRange[0]:0,max:l.limitField=="flowRate"?l.impellerDiameterRange[1]:void 0,addonAfter:"mm",value:B})})}),(0,e.jsx)(u.Z,{span:10,children:(0,e.jsx)(E.Z.Item,{label:"\u53F6\u8F6E\u5C3A\u5BF8\u76F8\u4F3C\u8BBE\u8BA1\u7CFB\u6570",labelCol:{span:12},children:(0,e.jsx)(A.Z,{style:{width:"80%"},min:0,max:10,disabled:!0,value:L.impellerDiameter,onChange:Ce})})})]})}),g[1]!="1"?null:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(h.Z,{style:{marginBottom:8},justify:"space-between",children:[(0,e.jsx)(u.Z,{span:6,children:(0,e.jsxs)(E.Z.Item,{label:"\u539F\u8F6C\u901F",children:[s==null?void 0:s.motorSpeed,"r/min"]})}),(0,e.jsx)(u.Z,{span:8,children:(0,e.jsx)(E.Z.Item,{label:"\u8C03\u6574\u8F6C\u901F",name:"motorSpeed",initialValue:l.sortMotorSpeed?l.sortMotorSpeed:s==null?void 0:s.motorSpeed,children:(0,e.jsx)(A.Z,{min:0,addonAfter:"r/min",value:W})})}),(0,e.jsx)(u.Z,{span:10,children:(0,e.jsx)(E.Z.Item,{label:"\u8F6C\u901F\u76F8\u4F3C\u8BBE\u8BA1\u7CFB\u6570",labelCol:{span:12},children:(0,e.jsx)(A.Z,{style:{width:"80%"},min:0,max:10,disabled:!0,value:L.motorSpeed,onChange:Ce})})})]})})]})})})),(0,e.jsx)(J.Z,{style:{marginTop:12,marginBottom:12}}),(0,e.jsxs)(h.Z,{children:[(0,e.jsxs)(u.Z,{span:8,children:[(0,e.jsxs)(h.Z,{children:[(0,e.jsx)(u.Z,{span:2}),(0,e.jsx)(u.Z,{span:22,style:{paddingTop:24},children:(0,e.jsxs)(H.ZP.Group,{disabled:!0,value:l.limitField,onChange:function(i){var o=i.target.value;o?(oe((0,O.Z)((0,O.Z)({},l),{},{limitField:o})),console.log(" !!!!!!!!!!!!!setImpellerDiameter(state.impellerDiameterMedian);"),console.log(l.impellerDiameterMedian),w(l.impellerDiameterMedian)):o=="unLimited"&&(oe((0,O.Z)((0,O.Z)({},l),{},{limitField:"unLimited"})),console.log("impellerDiameter"),console.log(B),console.log(" !!!!!!!!!!!!!!!!! setImpellerDiameter(fanInfo.impellerDiameter);"),console.log(s.impellerDiameter),w(s.impellerDiameter))},children:[(0,e.jsx)(H.ZP,{value:"flowRate",children:"\u9650\u5B9A\u6D41\u91CF"}),(0,e.jsx)(H.ZP,{value:"unLimited",children:"\u4E0D\u9650\u5B9A"})]})})]}),(0,e.jsx)("div",{className:ie().cardBody1,children:(0,e.jsx)(se.ZP,{search:!1,options:!1,columns:dt,dataSource:ut,pagination:!1,rowKey:"key",actionRef:He})})]}),(0,e.jsx)(u.Z,{span:16,children:(0,e.jsx)(Ie.Z,{layout:"horizontal",height:"400px",expect:n,getPerfData:Ve,pressureRange:l.pressureRange,pressureField:l.pressureField})})]}),(0,e.jsx)(J.Z,{style:{marginTop:0}}),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(se.ZP,{size:"small",search:!1,options:!1,pagination:!1,columns:Q,actionRef:_t,dataSource:fe})}),(0,e.jsx)(J.Z,{}),(0,e.jsx)(h.Z,{gutter:16,justify:"end",align:"middle",children:(0,e.jsx)(u.Z,{span:4,children:(0,e.jsx)(te.Z,{type:"primary",onClick:function(){ae.m8.push("/similarDesign/report",{model:Z,similarPerfData:fe,flowRate:n==null?void 0:n.flowRate,pressure:n==null?void 0:n.pressure,pressureField:l.pressureField,impellerDiameter:B,motorSpeed:W})},children:"\u751F\u6210\u62A5\u544A"},"primary")})})]})})};T.default=we}}]);

(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[9669],{88821:function(We){We.exports={container:"container___3o5TU",card:"card___1D5c3",title:"title___312js",inputNum:"inputNum___3OOh9",centerButton:"centerButton___1Pjnj",flieContent:"flieContent___3xFhj",filePdf:"filePdf___2tEVl",filePdfFooter:"filePdfFooter___GSN8I",filePdfPage:"filePdfPage___20KLM",view:"view___12t0L"}},19396:function(We){We.exports={modal:"modal___icVqn"}},65501:function(We){We.exports={myTable1:"myTable1___9KOqN",myTable2:"myTable2___328lI"}},36832:function(We){We.exports={container:"container___1UqCr",card:"card___1EXGI",title:"title___24uAN",inputNum:"inputNum___2NjiB",centerButton:"centerButton___3pgDk",flieContent:"flieContent___39BMl",filePdf:"filePdf___3XBDt",filePdfFooter:"filePdfFooter___2KYk1",filePdfPage:"filePdfPage___3P5Gs",siteInputGroupWrapper:"siteInputGroupWrapper___1wdHI",siteInputSplit:"siteInputSplit___Mh5on",siteInputRight:"siteInputRight___2Lbxd","ant-input-rtl":"ant-input-rtl___1_QQZ",inputGroupCompact:"inputGroupCompact___1Wh2p"}},83360:function(We,Ge,t){"use strict";var B=t(57663),Ae=t(71577),ie=t(2824),et=t(67294),ke=t(88821),lt=t.n(ke),Y=t(5058),Et=t.n(Y),C=t(24358),jt=t(30381),r=t.n(jt),$=t(85893),he=function(V){var Ce=V.url,R=V.filename,Ie;R!=null?Ie=R.split(".").pop():Ie=Ce.split(".").pop();var re=(0,et.useState)({open:!1,file:{name:""}}),x=(0,ie.Z)(re,2),X=x[0],Ye=x[1],Oe=(0,et.useState)(!1),Z=(0,ie.Z)(Oe,2),ve=Z[0],Zt=Z[1],p=(0,et.useState)({page:1,pages:1}),tt=(0,ie.Z)(p,2),q=tt[0],ze=tt[1],He=function(y){ze({page:1,pages:y})},j=function(y){ze({page:y.page-1,pages:y.pages})},u=function(y){ze({page:y.page+1,pages:y.pages})},a=function(y,xt,mt){for(var yt=[],st=2;st<=xt.pages;st++)yt.push((0,$.jsx)(C.Z,{page:st,file:mt.file.url,scale:.61},"x".concat(st)));return yt},f=function(y){var xt=y.numPages;ze({page:1,pages:xt})};return(0,$.jsx)($.Fragment,{children:Ie=="pdf"?(0,$.jsx)("div",{children:(0,$.jsxs)("div",{children:[(0,$.jsx)("div",{className:lt().filePdf,children:(0,$.jsx)("div",{className:lt().view,children:(0,$.jsx)(C.Z,{file:Ce+"?"+r()(),onDocumentComplete:function(y){He(y)},page:q.page})})}),(0,$.jsxs)("div",{className:lt().filePdfFooter,children:[q.page===1?null:(0,$.jsx)(Ae.Z,{size:"small",type:"primary",onClick:function(){j(q)},children:"\u4E0A\u4E00\u9875"}),(0,$.jsxs)("div",{className:lt().filePdfPage,children:[(0,$.jsxs)("span",{children:["\u7B2C",q.page,"\u9875"]}),"/",(0,$.jsxs)("span",{children:["\u5171",q.pages,"\u9875"]})]}),q.page===q.pages?null:(0,$.jsx)(Ae.Z,{size:"small",style:{marginLeft:"10px"},type:"primary",onClick:function(){u(q)},children:"\u4E0B\u4E00\u9875"})]})]})}):(0,$.jsx)("div",{style:{height:window.innerHeight*.8},children:Ie=="doc"?(0,$.jsx)("label",{children:"\u6682\u4E0D\u652F\u6301doc\u6587\u4EF6\u683C\u5F0F\u9884\u89C8"}):(0,$.jsx)(Et(),{fileType:Ie,filePath:Ce+"?v="+r()(),onError:function(){console.log("error in file-viewer")},errorComponent:(0,$.jsx)("label",{children:"\u51FA\u73B0\u9519\u8BEF"}),unsupportedComponent:function(y){return Ce==""?(0,$.jsx)("label",{children:"\u6682\u65E0"}):y=="doc"?(0,$.jsx)("label",{children:"\u6682\u4E0D\u652F\u6301doc\u6587\u4EF6\u683C\u5F0F\u9884\u89C8"}):y=="dwg"?(0,$.jsx)("label",{children:"\u6682\u4E0D\u652F\u6301dwg\u6587\u4EF6\u683C\u5F0F\u9884\u89C8"}):(0,$.jsx)("label",{})}})})})};Ge.Z=he},12445:function(We,Ge,t){"use strict";var B=t(71194),Ae=t(50146),ie=t(66456),et=t(15711),ke=t(11849),lt=t(43185),Y=t(93009),Et=t(57663),C=t(71577),jt=t(20136),r=t(55241),$=t(34792),he=t(48086),Be=t(2824),V=t(67294),Ce=t(54701),R=t(1870),Ie=t(19396),re=t.n(Ie),x=t(30381),X=t.n(x),Ye=t(85893),Oe=function(ve){var Zt=ve.excelTableColumns,p=ve.secondExcelTableColumns,tt=ve.tipContent,q=ve.getExcelData,ze=ve.submitExcelData,He=ve.sheetNum,j=He===void 0?0:He,u=ve.text,a=u===void 0?"\u5BFC\u5165":u,f=ve.isPreview,A=f===void 0?!1:f,y=ve.isSelectRow,xt=y===void 0?!1:y,mt=function(de){var Ve=[];for(var ct in de)Ve.push(ct.toString());for(var Se=[],Ee=0;Ee<Ve.length;Ee++)Ve[Ee]=="\u8F6C\u901F(r/min)"?Se.push({title:Ve[Ee],render:function(ft,Xe,Pt){return console.log("record"),console.log(Xe),Xe.motorSpeed==null?Xe.motorSpeedMin:Xe.motorSpeedMin+"/"+Xe.motorSpeed}}):Se.push({title:Ve[Ee],dataIndex:de[Ve[Ee]]});return Se},yt=(0,V.useState)([]),st=(0,Be.Z)(yt,2),Ut=st[0],At=st[1],Ct=(0,V.useState)([]),St=(0,Be.Z)(Ct,2),dt=St[0],Ft=St[1],pe=(0,V.useState)(!1),nt=(0,Be.Z)(pe,2),Lt=nt[0],pt=nt[1],e={accept:".xls,.xlsx,application/vnd.ms-excel",showUploadList:!1,beforeUpload:function(de){var Ve=de,ct=new FileReader;return ct.onload=function(Se){var Ee=Se.target.result,_e=Ce.ij(Ee,{type:"binary"}),ft=_e.Sheets[_e.SheetNames[j]],Xe=Ce.P6.sheet_to_json(ft,{header:1});Mt(Zt,Xe,de)},ct.readAsBinaryString(Ve),!1},onRemove:function(){Ft([])}},Mt=function(de,Ve,ct){var Se=Ve.splice(0,1);Se=Se[0];for(var Ee=[],_e=0;Se[_e]!=null;){if(Se[_e]=Se[_e].replace(" ",""),Object.keys(de).includes(Se[_e]))Ee.push(de[Se[_e]]);else if(Se[_e]=="\u6D41\u91CF\uFF08m3/s\uFF09")console.log("dataIndex1"),console.log(Ee),Ee.push(de["\u6D41\u91CF(m3/s)"]);else{he.default.warn("\u4E0A\u4F20excel\u6587\u4EF6\u8868\u5934"+Se[_e]+"\u6709\u8BEF\uFF0C\u8BFB\u53D6\u5931\u8D25"),Ee=[],pt(!1);return}_e++}console.log("jsonArr"),console.log(Ve);var ft=Ve.map(function(Pt,Rt){var Tt=mt(de);At(Tt);var ht={};return ht.key=Rt+1,Pt.forEach(function(ee,le){Ee[le]=="birthday"?(console.log("\uFF01\uFF01\uFF01\uFF01\uFF01\uFF01\uFF01\uFF01\uFF01\uFF01\uFF01"),console.log(ee),console.log(typeof ee=="number"),ee=X()("1900-01-01").add(ee,"days"),console.log(ee),ht[Ee[le]]=ee):typeof ee=="number"&&(ee=Math.floor(ee*1e3)/1e3),ht[Ee[le]]=ee}),console.log("jsonObj"),console.log(ht),ht});console.log("jsonArrData"),console.log(ft);var Xe=JSON.parse(JSON.stringify(ft));Ft(Xe),q(ft),pt(A)},Kt=function(de){console.log("selectedRowKeys changed: ",de)};return(0,Ye.jsxs)(Ye.Fragment,{children:[(0,Ye.jsx)(Y.Z,(0,ke.Z)((0,ke.Z)({style:{marginLeft:10,marginRight:10}},e),{},{children:(0,Ye.jsxs)(C.Z,{children:[a,tt==null?null:(0,Ye.jsx)(r.Z,{title:"\u6CE8\u610F\u4E8B\u9879",content:tt,children:(0,Ye.jsx)(R.Z,{})})]})}),"importExcel"),(0,Ye.jsx)(Ae.Z,{forceRender:!0,width:"max-content",className:re().modal,title:"\u6587\u4EF6\u9884\u89C8",open:Lt,onCancel:function(){pt(!1)},okText:"\u786E\u8BA4",okButtonProps:{onClick:function(de){console.log(de),console.log("ok"),pt(!1),ze==null||ze(dt)}},children:(0,Ye.jsx)(et.Z,{columns:Ut,dataSource:dt})})]})};Ge.Z=Oe},24323:function(We,Ge,t){"use strict";t.d(Ge,{NC:function(){return B},Cp:function(){return Ae},rU:function(){return ie}});var B=["\u6D41\u91CF(m3/s)","\u538B\u529B(Pa)","\u9759\u538B(Pa)","\u98CE\u673A\u6548\u7387(%)","\u9759\u538B\u6548\u7387(%)","\u8F74\u529F\u7387(kW)","\u8F6C\u901F(r/min)","\u76F4\u5F84(mm)","\u566A\u97F3(dB(A))","\u6BD4\u8F6C\u901F","u","\u6D41\u91CF\u7CFB\u6570","\u538B\u529B\u7CFB\u6570"],Ae=["flowRate","fullPressure","staticPressure","fanEff","staticPressureEff","shaftPower","motorSpeed","impellerDiameter","noise","specificSpeed","u","flowCoefficient","pressureCoefficient"],ie={"\u6D41\u91CF(m3/s)":"flowRate","\u538B\u529B(Pa)":"fullPressure","\u9759\u538B(Pa)":"staticPressure","\u98CE\u673A\u6548\u7387(%)":"fanEff","\u9759\u538B\u6548\u7387(%)":"staticPressureEff","\u8F74\u529F\u7387(kW)":"shaftPower","\u8F6C\u901F(r/min)":"motorSpeed","\u76F4\u5F84(mm)":"impellerDiameter","\u566A\u97F3(dB(A))":"noise",\u6BD4\u8F6C\u901F:"specificSpeed",u:"u",\u6D41\u91CF\u7CFB\u6570:"flowCoefficient",\u538B\u529B\u7CFB\u6570:"pressureCoefficient"}},7626:function(We,Ge,t){"use strict";t.r(Ge),t.d(Ge,{default:function(){return jn}});var B=t(11849),Ae=t(58024),ie=t(91894),et=t(18106),ke=t(95562),lt=t(57663),Y=t(71577),Et=t(13062),C=t(71230),jt=t(89032),r=t(15746),$=t(49111),he=t(19650),Be=t(54029),V=t(79166),Ce=t(34792),R=t(48086),Ie=t(74379),re=t(38648),x=t(39428),X=t(3182),Ye=t(9715),Oe=t(55843),Z=t(2824),ve=t(98244),Zt=t(11075),p=t(67294),tt=t(952),q=t(5966),ze=t(36832),He=t.n(ze),j=t(21010),u=t(85581),a=t(71194),f=t(50146),A=t(66456),y=t(15711),xt=t(77883),mt=t(85986),yt=t(43358),st=t(34041),Ut=t(48736),At=t(27049),Ct=t(12445),St=t(99895),dt=t(42852),Ft=t(64317),pe=t(31199),nt=["\u5E94\u7528\u8F66\u578B\u5927\u7C7B","\u5E94\u7528\u8F66\u578B","\u51B7\u5374\u5BF9\u8C61","\u98CE\u673A\u7C7B\u578B","\u98CE\u673A\u578B\u53F7","\u56FE\u53F7","\u7248\u672C\u53F7","\u6D41\u91CF(m3/s)","\u5168\u538B(Pa)","\u9759\u538B(Pa)","\u6548\u7387(%)","\u8F74\u529F\u7387(kW)","\u53F6\u8F6E\u76F4\u5F84(mm)","\u91CD\u91CF(Kg)","\u7535\u673A\u578B\u53F7","\u7535\u6E90\u9891\u7387(Hz)","\u7535\u673A\u529F\u7387(kW)","\u8F6C\u901F(r/min)","\u989D\u5B9A\u7535\u538B(V)","\u989D\u5B9A\u7535\u6D41(A)","\u6D77\u62D4(m)","\u6E29\u5EA6(\u2103)","\u6E7F\u5EA6(%)","\u5907\u6CE81(\u9879\u76EE\u540D\u79F0)","\u5907\u6CE82(\u5BA2\u6237)"],Lt=null,pt={\u5E94\u7528\u8F66\u578B\u5927\u7C7B:"applicationModelId",\u5E94\u7528\u8F66\u578B:"applicationModel",\u51B7\u5374\u5BF9\u8C61:"coolObject",\u98CE\u673A\u7C7B\u578B:"category",\u98CE\u673A\u578B\u53F7:"model",\u56FE\u53F7:"figNum",\u7248\u672C\u53F7:"version","\u6D41\u91CF(m3/s)":"flowRate","\u5168\u538B(Pa)":"fullPressure","\u9759\u538B(Pa)":"staticPressure","\u6548\u7387(%)":"efficiency","\u8F74\u529F\u7387(kW)":"shaftPower","\u53F6\u8F6E\u76F4\u5F84(mm)":"impellerDiameter","\u91CD\u91CF(Kg)":"weight",\u7535\u673A\u578B\u53F7:"motorModel","\u7535\u6E90\u9891\u7387(Hz)":"powerFrequency","\u7535\u673A\u529F\u7387(kW)":"motorPower","\u8F6C\u901F(r/min)":"motorSpeed","\u989D\u5B9A\u7535\u538B(V)":"ratedVoltage","\u989D\u5B9A\u7535\u6D41(A)":"ratedCurrent","\u6D77\u62D4(m)":"altitude","\u6E29\u5EA6(\u2103)":"temperature","\u6E7F\u5EA6(%)":"humidity","\u5907\u6CE81(\u9879\u76EE\u540D\u79F0)":"remark1","\u5907\u6CE82(\u5BA2\u6237)":"remark2"},e=t(85893),Mt=function(c){var T=c.setKey,m=c.formRef,_=c.form,H=c.flowRateUnit,ce=c.setFlowRateUnit,G=c.model,J=c.onSubmit,N=(0,p.useState)(),U=(0,Z.Z)(N,2),W=U[0],Ue=U[1],fe=(0,p.useState)([]),Ne=(0,Z.Z)(fe,2),ge=Ne[0],Me=Ne[1],Re=(0,p.useState)({}),je=(0,Z.Z)(Re,2),Qe=je[0],be=je[1],I=(0,p.useState)({}),Te=(0,Z.Z)(I,2),se=Te[0],O=Te[1],M=(0,p.useState)([]),Q=(0,Z.Z)(M,2),te=Q[0],k=Q[1],De=(0,p.useState)([]),ue=(0,Z.Z)(De,2),ot=ue[0],ut=ue[1],qe=(0,p.useState)([]),at=(0,Z.Z)(qe,2),vt=at[0],Le=at[1],Fe=(0,p.useState)(!1),rt=(0,Z.Z)(Fe,2),Ze=rt[0],Je=rt[1],ne=(0,p.useState)(),xe=(0,Z.Z)(ne,2),F=xe[0],i=xe[1],we=_.validateFields,ye=_.getFieldValue,P=function(n){if(n.forEach(function(z){if(z.motorSpeed!=null){if(typeof z.motorSpeed!="number"&&z.motorSpeed.indexOf("/")!=-1){var $e=z.motorSpeed.split("/");$e.sort(function(Ke,w){return Ke-w}),z.motorSpeedMin=Number($e[0]),z.motorSpeed=Number($e[1])}else z.motorSpeedMin=Number(z.motorSpeed),z.motorSpeed=void 0;console.log(z.motorSpeedMin),console.log(z.motorSpeed)}}),Le(n),n.length==1){var o=n[0];if(console.log(o),o!=null){var b;if(o.category!=null)for(var L in te)te[L].includes(o.category)&&(o.category=[L,o.category]);ot.includes(o.applicationModelId)||(o.applicationModelId=void 0),G&&(o.model=G),(b=m.current)===null||b===void 0||b.setFieldsValue(o)}}else n.length>0&&Je(!0);return n},E=function(n){return console.log("selectedRow changed: ",n),i(n),n},s=function g(n){if(n.length!=null){for(var o=[],b=0;b<n.length;b++)o.push({label:n[b],value:n[b]});return o}else{var L=[];for(var z in n){var $e={label:z,value:z,children:g(n[z])};L.push($e)}return L}};(0,p.useEffect)(function(){(0,u.we)().then(function(g){var n=s(g.data);k(g.data),Me(n)}),(0,u.Jg)().then(function(g){for(var n={},o=0;o<g.data.length;o++)n[g.data[o]]=g.data[o];ut(g.data),be(n)}),(0,u.bK)().then(function(g){for(var n={},o=0;o<g.data.length;o++)n[g.data[o]]=g.data[o];O(n)})},[]);for(var D=[],ae=0;ae<nt.length;ae++)nt[ae]=="\u8F6C\u901F(r/min)"?D.push({width:120,title:nt[ae],render:function(n,o,b){return console.log("record"),console.log(o),o.motorSpeed==null?o.motorSpeedMin:o.motorSpeedMin+"/"+o.motorSpeed}}):D.push({width:nt.length>6?150:nt.length<4?40:100,title:nt[ae],dataIndex:pt[nt[ae]]});return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(ie.Z,{className:He().card,bordered:!1,children:[(0,e.jsxs)(C.Z,{children:[(0,e.jsx)(r.Z,{lg:11,md:12,sm:24,children:(0,e.jsxs)(C.Z,{wrap:!1,justify:"end",gutter:6,children:[(0,e.jsx)(r.Z,{lg:10,md:12,sm:24,children:(0,e.jsx)(Ft.Z,{mode:"single",label:"\u5E94\u7528\u8F66\u578B\u5927\u7C7B",labelCol:{span:10},name:"applicationModelId",valueEnum:Qe,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5E94\u7528\u8F66\u578B\u5927\u7C7B!"}]})}),(0,e.jsx)(r.Z,{lg:10,md:12,sm:24,children:(0,e.jsx)(q.Z,{name:"applicationModel",label:"\u8F66\u578B\u540D\u79F0",placeholder:"",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u8F66\u578B\u540D\u79F0!(\u6216\u4E0E\u5E94\u7528\u8F66\u578B\u5927\u7C7B\u76F8\u540C)"}]})})]})}),(0,e.jsx)(r.Z,{lg:11,md:12,sm:24,children:(0,e.jsx)(Ft.Z,{mode:"single",label:"\u51B7\u5374\u5BF9\u8C61",name:"coolObject",valueEnum:se,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u51B7\u5374\u5BF9\u8C61!"}]})})]}),(0,e.jsxs)(C.Z,{children:[(0,e.jsx)(r.Z,{lg:11,md:12,sm:24,children:(0,e.jsx)(St.Z,{label:"\u98CE\u673A\u7C7B\u578B",name:"category",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u98CE\u673A\u7C7B\u578B!"}],fieldProps:{onChange:function(n){console.log(n)},options:ge}})}),(0,e.jsx)(r.Z,{lg:11,md:12,sm:24,children:(0,e.jsx)(q.Z,{name:"model",label:"\u98CE\u673A\u578B\u53F7",disabled:!!G,placeholder:"",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u98CE\u673A\u578B\u53F7!"}]})}),(0,e.jsx)(r.Z,{lg:11,md:12,sm:24,children:(0,e.jsx)(q.Z,{name:"figNum",label:"\u56FE\u53F7",placeholder:"",labelCol:{span:8},wrapperCol:{span:16},rules:[{required:!0,message:"\u8BF7\u586B\u5199\u56FE\u53F7!"}]})}),(0,e.jsx)(r.Z,{lg:11,md:12,sm:24,children:(0,e.jsx)(q.Z,{name:"version",label:"\u7248\u672C\u53F7",placeholder:"",labelCol:{span:8},wrapperCol:{span:16},rules:[{required:!0,message:"\u8BF7\u586B\u5199\u7248\u672C\u53F7!"}]})})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)(At.Z,{dashed:!0,style:{margin:0}}),(0,e.jsxs)(dt.Z,{title:"\u94ED\u724C\u4FE1\u606F: ",bordered:!1,collapsible:!0,children:[(0,e.jsxs)(C.Z,{children:[(0,e.jsx)(r.Z,{lg:11,md:12,sm:24,children:(0,e.jsx)(pe.Z,{name:"flowRate",label:"\u6D41\u91CF",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u6D41\u91CF!"},{type:"number"}],tooltip:"\u8BF7\u6CE8\u610F\u5355\u4F4D\u6362\u7B97\uFF01",onMetaChange:function(n){console.log("onMetaChange"),console.log(n)},children:(0,e.jsx)(mt.Z,{min:0,size:"middle",style:{width:"100%"},addonAfter:(0,e.jsx)(st.Z,{defaultValue:0,onChange:function(n){console.log(n);var o=m.current.getFieldValue("flowRate");Ue(o*Math.pow(60,n)),ce(n)},options:[{label:"m\xB3/s",value:0},{label:"m\xB3/min",value:1},{label:"m\xB3/h",value:2}]}),onChange:function(n){n&&Ue(n*Math.pow(60,H)),m.current.setFieldValue("flowRate",n),_.setFieldValue("flowRate",n)}})})}),(0,e.jsx)(r.Z,{lg:11,md:12,sm:24,children:(0,e.jsxs)(he.Z,{children:[" ",W?W+"m\xB3/s":null]})})]}),(0,e.jsxs)(C.Z,{children:[(0,e.jsx)(r.Z,{lg:11,md:12,sm:24,children:(0,e.jsx)(pe.Z,{name:"fullPressure",label:"\u5168\u538B",placeholder:"Pa",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u5168\u538B!"},{type:"number"}]})}),(0,e.jsx)(r.Z,{lg:11,md:12,sm:24,children:(0,e.jsx)(pe.Z,{name:"staticPressure",label:"\u9759\u538B",placeholder:"Pa",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u9759\u538B!"},{type:"number"}]})})]}),(0,e.jsxs)(C.Z,{children:[(0,e.jsx)(r.Z,{lg:11,md:12,sm:24,children:(0,e.jsx)(pe.Z,{name:"efficiency",label:"\u6548\u7387",placeholder:"%",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u6548\u7387!"},{type:"number"}]})}),(0,e.jsx)(r.Z,{lg:11,md:12,sm:24,children:(0,e.jsx)(pe.Z,{name:"shaftPower",label:"\u8F74\u529F\u7387",placeholder:"kW",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u8F74\u529F\u7387!"},{type:"number"}]})})]}),(0,e.jsxs)(C.Z,{children:[(0,e.jsx)(r.Z,{lg:11,md:12,sm:24,children:(0,e.jsx)(q.Z,{name:"motorModel",label:"\u7535\u673A\u578B\u53F7",placeholder:"",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u7535\u673A\u578B\u53F7!"}]})}),(0,e.jsx)(r.Z,{lg:11,md:12,sm:24,children:(0,e.jsx)(pe.Z,{name:"powerFrequency",label:"\u7535\u6E90\u9891\u7387",placeholder:"Hz",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u7535\u6E90\u9891\u7387!"},{type:"number"}]})}),(0,e.jsx)(r.Z,{lg:11,md:12,sm:24,children:(0,e.jsx)(pe.Z,{name:"motorPower",label:"\u7535\u673A\u529F\u7387",placeholder:"kW",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u7535\u673A\u529F\u7387!"},{type:"number"}]})}),(0,e.jsx)(r.Z,{lg:11,md:12,sm:24,children:(0,e.jsxs)(C.Z,{wrap:!1,align:"stretch",gutter:6,justify:"end",children:[(0,e.jsx)(r.Z,{span:4}),(0,e.jsx)(r.Z,{children:(0,e.jsx)(Oe.Z.Item,{label:"\u7535\u673A\u8F6C\u901F",name:"motorSpeedMin",labelCol:{span:8},tooltip:"\u82E5\u53EA\u6709\u4E00\u4E2A\u8F6C\u901F,\u8BF7\u5728\u6700\u5C0F\u503C\u8F93\u5165\u8F6C\u901F\u3002excel\u5BFC\u5165\u65F6\u82E5\u6709\u4E24\u4E2A\u8F6C\u901F,\u8BF7\u7528/\u7B26\u53F7\u5206\u9694\u3002",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u7535\u673A\u8F6C\u901F!"},{type:"number"},function(g){var n=g.getFieldValue;return{validator:function(b,L){return L>n("motorSpeed")?Promise.reject("\u6700\u5C0F\u503C\u672A\u5C0F\u4E8E\u6700\u5927\u503C!"):Promise.resolve()}}}],children:(0,e.jsx)(mt.Z,{min:0,style:{width:"100%",textAlign:"center"},addonAfter:"r/min",placeholder:"\u6700\u5C0F\u503C",onChange:function(n){}})})}),(0,e.jsx)(r.Z,{children:"~"}),(0,e.jsx)(r.Z,{children:(0,e.jsx)(Oe.Z.Item,{name:"motorSpeed",wrapperCol:{},rules:[{type:"number"},function(g){var n=g.getFieldValue;return{validator:function(b,L){return L<n("motorSpeedMin")?Promise.reject("\u6700\u5927\u503C\u672A\u5927\u4E8E\u6700\u5C0F\u503C!"):Promise.resolve()}}}],children:(0,e.jsx)(mt.Z,{style:{width:"100%",textAlign:"center"},placeholder:"\u6700\u5927\u503C",addonAfter:"r/min",onChange:function(n){}})})})]})})]}),(0,e.jsxs)(C.Z,{children:[(0,e.jsx)(r.Z,{lg:11,md:12,sm:24,children:(0,e.jsx)(pe.Z,{name:"ratedVoltage",label:"\u989D\u5B9A\u7535\u538B",placeholder:"V",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u989D\u5B9A\u7535\u538B!"},{type:"number"}]})}),(0,e.jsx)(r.Z,{lg:11,md:12,sm:24,children:(0,e.jsx)(pe.Z,{name:"ratedCurrent",label:"\u989D\u5B9A\u7535\u6D41",placeholder:"A",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u989D\u5B9A\u7535\u6D41!"},{type:"number"}]})})]}),(0,e.jsxs)(C.Z,{children:[(0,e.jsx)(r.Z,{lg:11,md:12,sm:24,children:(0,e.jsx)(pe.Z,{name:"altitude",label:"\u6D77\u62D4",placeholder:"m",rules:[{type:"number"}]})}),(0,e.jsx)(r.Z,{lg:11,md:12,sm:24,children:(0,e.jsx)(pe.Z,{name:"temperature",label:"\u6E29\u5EA6",placeholder:"\u6444\u6C0F\u5EA6\u2103",rules:[{type:"number"}]})})]}),(0,e.jsx)(C.Z,{children:(0,e.jsx)(r.Z,{lg:11,md:12,sm:24,children:(0,e.jsx)(pe.Z,{name:"humidity",label:"\u6E7F\u5EA6",placeholder:"%",rules:[{type:"number"}]})})})]}),(0,e.jsx)(At.Z,{style:{marginTop:0},dashed:!0})]}),(0,e.jsxs)(C.Z,{children:[(0,e.jsx)(r.Z,{lg:11,md:12,sm:24,children:(0,e.jsx)(pe.Z,{name:"impellerDiameter",label:"\u53F6\u8F6E\u76F4\u5F84",placeholder:"mm",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u53F6\u8F6E\u76F4\u5F84!"},{type:"number"}]})}),(0,e.jsxs)(r.Z,{lg:11,md:12,sm:24,children:[" ",(0,e.jsx)(pe.Z,{name:"weight",label:"\u91CD\u91CF",placeholder:"kg",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u91CD\u91CF!"},{type:"number"}]})]})]}),(0,e.jsxs)(C.Z,{children:[(0,e.jsx)(r.Z,{lg:11,md:12,sm:24,children:(0,e.jsx)(q.Z,{name:"remark1",label:"\u5907\u6CE81",placeholder:"(\u9879\u76EE\u540D\u79F0)"})}),(0,e.jsx)(r.Z,{lg:11,md:12,sm:24,children:(0,e.jsx)(q.Z,{name:"remark2",label:"\u5907\u6CE82",placeholder:"(\u5BA2\u6237)"})})]})]}),(0,e.jsx)("div",{className:He().centerButton,children:(0,e.jsxs)(C.Z,{justify:"center",gutter:16,children:[(0,e.jsx)(r.Z,{children:(0,e.jsx)(Y.Z,{onClick:(0,X.Z)((0,x.Z)().mark(function g(){var n;return(0,x.Z)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,m.current.getFieldsValue();case 2:n=b.sent,console.log("params"),console.log(n),m.current.resetFields(["applicationModelId","applicationModel","coolObject","category","model","figNum","version","flowRate","fullPressure","staticPressure","efficiency","shaftPower","motorModel","powerFrequency","motorPower","motorSpeedMin","motorSpeed","ratedVoltage","ratedCurrent","altitude","temperature","humidity","impellerDiameter","weight","remark1","remark2",""]),G&&m.current.setFieldValue("model",n.model);case 7:case"end":return b.stop()}},g)})),children:"\u91CD\u7F6E"})}),(0,e.jsxs)(r.Z,{children:[(0,e.jsx)(Ct.Z,{text:"\u4ECEexcel\u5BFC\u5165",excelTableColumns:pt,tipContent:(0,e.jsxs)(e.Fragment,{children:["1.\u98CE\u673A\u7C7B\u578B\u82E5\u4E3A\u7CFB\u7EDF\u4E2D\u4E0D\u5B58\u5728\u7684\u7684\u7C7B\u578B\uFF0C\u8BF7\u9009\u62E9\u8F93\u5165",(0,e.jsx)("br",{}),"2.\u5BFC\u5165\u540E\u68C0\u67E5\u6D41\u91CF\u5355\u4F4D",(0,e.jsx)("br",{}),"3.\u82E5\u6709\u4E24\u4E2A\u8F6C\u901F,\u8BF7\u7528/\u7B26\u53F7\u5206\u9694",(0,e.jsx)("br",{})]}),getExcelData:P}),(0,e.jsx)(f.Z,{width:1500,title:"\u8BF7\u9009\u62E9\u8981\u5BFC\u5165\u7684\u4FE1\u606F",open:Ze,centered:!0,onCancel:function(){console.log("oncancel"),Je(!1)},onOk:function(n){if(console.log("submit selectedRow"),console.log(F),F!=null){var o;if(F.category!=null)for(var b in te)console.log(te[b]),te[b].includes(F.category)&&(F.category=[b,F.category]);ot.includes(F.applicationModelId)||(F.applicationModelId=void 0),(o=m.current)===null||o===void 0||o.setFieldsValue(F)}Je(!1)},children:(0,e.jsx)(y.Z,{columns:D,scroll:{x:860,y:500},rowSelection:{type:"radio",onSelect:E,columnTitle:{}},pagination:{defaultPageSize:5,showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:["5","10","20","50"]},dataSource:vt})})]}),(0,e.jsxs)(r.Z,{children:[(0,e.jsx)(Y.Z,{type:"primary",onClick:(0,X.Z)((0,x.Z)().mark(function g(){var n,o;return(0,x.Z)().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.prev=0,L.next=3,we();case 3:n=L.sent,console.log("baseinfo form.getFieldsValue()"),console.log(n),T("2"),L.next=16;break;case 9:L.prev=9,L.t0=L.catch(0),o=L.t0.errorFields,console.log(o),o.map(function(z,$e){for(var Ke=z.errors;Ke.length>1;)Ke=Ke.splice(1);z.errors=Ke}),R.default.warn(o[0].errors),L.t0.errorFields=o;case 16:case"end":return L.stop()}},g,null,[[0,9]])})),children:"\u4E0B\u4E00\u6B65"}),G?(0,e.jsx)(Y.Z,{type:"primary",style:{marginLeft:3},onClick:function(n){return J()},children:"\u4FDD\u5B58\u5E76\u9000\u51FA"}):null]})]})})]})},Kt=Mt,gt=t(98858),de=t(4914),Ve=t(88983),ct=t(47933),Se=t(402),Ee=t(56256),_e=t(51042),ft=t(52897),Xe=t(53667),Pt=t.n(Xe),Rt=t(30381),Tt=t.n(Rt),ht=t(91283),ee=t(24323),le=t(99448),zt=t(13339),Wt=t(5314),Ht=t(65501),Vt=t.n(Ht),Jt=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(T){setTimeout(function(){T(!0)},c)})},Yt=function(c){var T=c.excelTableColumns,m=c.defaultData,_=c.setExcelData2,H=c.actionRef,ce=c.form,G=c.calculate;console.log("defaultData"),console.log(m);var J=[],N=0;m!=null&&m.forEach(function(O){var M=(0,le.T9)(O.motorSpeed,O.impellerDiameter,3),Q=(0,le.FH)(O.motorSpeed,O.flowRate,O.fullPressure,3),te=(0,le.jm)(O.flowRate,O.motorSpeed,O.impellerDiameter,3),k=(0,le.jm)(O.fullPressure,O.motorSpeed,O.impellerDiameter,3);J.push({specificSpeed:Q,u:M,flowCoefficient:te,pressureCoefficient:k}),m[N].key=N.toString(),m[N].specificSpeed=Q,m[N].u=M,m[N].flowCoefficient=te,m[N].pressureCoefficient=k,N++});var U=[],W=[];for(var Ue in T)W.push(Ue.toString());console.log(W);for(var fe=0;fe<9;fe++)U.push({title:W[fe],dataIndex:T[W[fe]],valueType:"digit",formItemProps:T[W[fe]]=="noise"?void 0:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]},width:80});U.push({title:"\u64CD\u4F5C",valueType:"option",width:100,render:function(M,Q,te,k){return[(0,e.jsx)("a",{onClick:function(){var ue;k==null||(ue=k.startEditable)===null||ue===void 0||ue.call(k,Q.key)},children:"\u7F16\u8F91"},"editable"),(0,e.jsx)(Wt.Z.RecordCreator,{record:(0,B.Z)((0,B.Z)({},Q),{},{key:(Math.random()*1e6).toFixed(0)}),children:(0,e.jsx)("a",{children:"\u590D\u5236"})},"copy")]}});for(var Ne=[],ge=9;ge<W.length;ge++)Ne.push({title:W[ge],dataIndex:T[W[ge]]});var Me=(0,p.useState)(function(){return m.map(function(O){return O.key})}),Re=(0,Z.Z)(Me,2),je=Re[0],Qe=Re[1],be=(0,p.useState)(function(){return m}),I=(0,Z.Z)(be,2),Te=I[0],se=I[1];return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(C.Z,{children:[(0,e.jsx)(r.Z,{span:G==!0?16:24,children:(0,e.jsx)(Wt.Z,{rowKey:"key",scroll:{x:960},className:Vt().myTable1,bordered:!0,actionRef:H,columns:U,maxLength:5,recordCreatorProps:!1,value:m,onChange:function(M){se(m),_(m)},editable:{form:ce,editableKeys:je,onSave:function(){var O=(0,X.Z)((0,x.Z)().mark(function Q(){return(0,x.Z)().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,Jt(200);case 2:case"end":return k.stop()}},Q)}));function M(){return O.apply(this,arguments)}return M}(),onChange:Qe,actionRender:function(M,Q,te){return[te.save,te.cancel,te.delete]},onValuesChange:function(M,Q){_(Q)}}})}),G==!1?null:(0,e.jsx)(r.Z,{span:8,children:(0,e.jsx)(zt.Z,{columns:Ne,search:!1,options:!1,className:Vt().myTable2,dataSource:J,bordered:!0})})]})})},Xt=Yt,It=t(32228),qt={labelCol:{span:10},wrapperCol:{span:18}},en=function(c){var T=c.setKey,m=c.standardStatusData,_=c.setStandardStatusData,H=c.id,ce=c.onSubmit;console.log("PerfDataForm id"),console.log(H);var G=(0,p.useRef)(),J=(0,p.useRef)(),N=Oe.Z.useForm(),U=(0,Z.Z)(N,1),W=U[0],Ue=Oe.Z.useForm(),fe=(0,Z.Z)(Ue,1),Ne=fe[0],ge=Oe.Z.useForm(),Me=(0,Z.Z)(ge,1),Re=Me[0],je=(0,p.useRef)(),Qe=(0,p.useState)({altitude:0,temperature:20,humidity:50,density:1.205}),be=(0,Z.Z)(Qe,2),I=be[0],Te=be[1],se=(0,p.useState)([]),O=(0,Z.Z)(se,2),M=O[0],Q=O[1],te=(0,p.useState)([!0,!1]),k=(0,Z.Z)(te,2),De=k[0],ue=k[1],ot=(0,p.useState)(!0),ut=(0,Z.Z)(ot,2),qe=ut[0],at=ut[1],vt=function(E){return console.log("set excelData2"),console.log(E),E.forEach(function(s){s.flowRate=(0,le.FE)(s.flowRate,3),s.fullPressure=(0,le.FE)(s.fullPressure,1),s.staticPressure=(0,le.FE)(s.staticPressure,1),s.fanEff=(0,le.FE)(s.fanEff,1),s.staticPressureEff=(0,le.FE)(s.staticPressureEff,1),s.shaftPower=(0,le.FE)(s.shaftPower,3),s.motorSpeed=(0,le.FE)(s.motorSpeed,0),s.impellerDiameter=(0,le.FE)(s.impellerDiameter,0)}),Q(E),E};(0,p.useEffect)(function(){H!=null&&(0,It.Wi)(H).then(function(P){P&&(_(P.data),Q(P.data))})},[]),(0,p.useEffect)(function(){if(M==null||M.length==0)_(M);else{for(var P=[],E=0;E<M.length;E++){var s=(0,B.Z)({},M[E]),D=0;De[0]?D=(0,le.h3)(I.altitude,I.temperature):D=I.density,s.fullPressure!=null&&(s.fullPressure=(0,le.kf)(s.fullPressure,D,1)),s.staticPressure!=null&&(s.staticPressure=(0,le.kf)(s.staticPressure,D,1)),s.shaftPower!=null&&(s.shaftPower=(0,le.Yv)(s.shaftPower,D,3)),P[E]=s}_(P)}},[M,I]);var Le=function(){var E;console.log("excelData2"),console.log(M);var s=[];M.map(function(D){return s.push(D)}),s.push({key:(Math.random()*1e6).toFixed(0)}),Q(s),(E=G.current)===null||E===void 0||E.reload()},Fe=function(E,s,D,ae){var g=D,n={};n.fileName=E,n.datas=[{sheetData:ae,sheetName:E,sheetFilter:g,sheetHeader:s}];var o=new(Pt())(n);o.saveExcel()},rt=[],Ze=[];for(var Je in ee.rU)Ze.push(Je.toString());for(var ne=0;ne<Ze.length;ne++)["fullPressure","staticPressure","shaftPower"].includes(ee.rU[Ze[ne]])?rt.push({title:Ze[ne],dataIndex:ee.rU[Ze[ne]],valueType:"digit",width:80,render:function(E,s){return(0,e.jsx)(Ee.Z.Text,{type:"success",children:E})}}):rt.push({title:Ze[ne],dataIndex:ee.rU[Ze[ne]],valueType:"digit",width:80});var xe=(0,p.useState)(!1),F=(0,Z.Z)(xe,2),i=F[0],we=F[1],ye=function(){var E=qe?m:M,s={};for(var D in E[0])s[D]=[];delete s.key;for(var ae in s)for(var g=0;g<E.length;g++)s[ae].push(E[g][ae]);return s};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(dt.Z,{title:"\u5B9E\u9A8C\u73AF\u5883\uFF1A ",bordered:!1,tooltip:"\u6D77\u62D4+\u6E29\u5EA6\u6216\u5BC6\u5EA6\u4E8C\u9009\u4E00",collapsible:!0,children:(0,e.jsx)(tt.ZP,(0,B.Z)((0,B.Z)({layout:"horizontal"},qt),{},{form:Re,formRef:je,submitter:!1,onValuesChange:function(E,s){Te((0,B.Z)((0,B.Z)({},s),E)),console.log("1111111111")},children:(0,e.jsxs)(C.Z,{align:"bottom",gutter:16,wrap:!1,justify:"start",children:[(0,e.jsxs)(r.Z,{span:14,children:[(0,e.jsxs)(C.Z,{children:[(0,e.jsx)(r.Z,{lg:9,md:12,sm:24,children:(0,e.jsx)(pe.Z,{name:"altitude",label:(0,e.jsx)(ct.ZP,{checked:De[0],value:1,onChange:function(E){var s=E.target.checked;if(s&&(Re.validateFields(),ue([s,!1]),I.density==null)){var D;(D=je.current)===null||D===void 0||D.setFieldValue("density",1.205),Te((0,B.Z)((0,B.Z)({},I),{},{density:1.205}))}!s&&I.altitude==null&&Te((0,B.Z)((0,B.Z)({},I),{},{altitude:0}))},children:"\u6D77\u62D4"}),colProps:{span:12},placeholder:"m",initialValue:I.altitude,disabled:De[1],addonAfter:"m",rules:[{required:De[0],message:"\u8BF7\u586B\u5199\u6D77\u62D4!"}]})}),(0,e.jsx)(r.Z,{lg:9,md:12,sm:24,children:(0,e.jsx)(pe.Z,{name:"temperature",label:"\u6E29\u5EA6",colProps:{span:12},initialValue:I.temperature,disabled:De[1],placeholder:"\u2103",addonAfter:"\u2103",rules:[{required:De[0],message:"\u8BF7\u586B\u5199\u6E29\u5EA6!"}]})}),(0,e.jsx)(r.Z,{lg:6,md:12,sm:24,children:(0,e.jsxs)(C.Z,{wrap:!1,justify:"end",align:"bottom",style:{paddingTop:4},children:[(0,e.jsx)(r.Z,{children:"\u5BC6\u5EA6\uFF1A"}),(0,e.jsx)(r.Z,{children:I.altitude!=null&&I.temperature!=null?(0,le.h3)(I.altitude,I.temperature,3):null}),(0,e.jsx)(r.Z,{children:"kg/m\xB3"})]})})]}),(0,e.jsx)(C.Z,{children:(0,e.jsx)(r.Z,{lg:8,md:12,sm:24,children:(0,e.jsx)(pe.Z,{name:"density",label:(0,e.jsx)(ct.ZP,{checked:De[1],onChange:function(E){var s=E.target.checked;if(ue([!1,s]),s==!0){if(Re.validateFields(),I.altitude==null){var D;(D=je.current)===null||D===void 0||D.setFieldValue("altitude",0)}if(I.temperature==null){var ae;(ae=je.current)===null||ae===void 0||ae.setFieldValue("temperature",20)}Te((0,B.Z)((0,B.Z)({},I),{},{altitude:0,temperature:20}))}},children:"\u5BC6\u5EA6"}),colProps:{span:12},placeholder:"kg/m\xB3",addonAfter:"kg/m\xB3",disabled:De[0],initialValue:I.density,rules:[{required:De[1],message:"\u8BF7\u586B\u5199\u5BC6\u5EA6!"}]})})})]}),(0,e.jsx)(r.Z,{span:2}),(0,e.jsx)(r.Z,{span:8,children:(0,e.jsxs)(de.Z,{title:"\u6807\u51C6\u6761\u4EF6",labelStyle:{justifyContent:"flex-end",minWidth:100},contentStyle:{justifyContent:"flex-start",minWidth:100},column:2,bordered:!0,size:"small",children:[(0,e.jsx)(de.Z.Item,{label:"\u6D77\u62D4 ",children:"0m"}),(0,e.jsx)(de.Z.Item,{label:"\u6E29\u5EA6 ",children:"20\u2103"}),(0,e.jsx)(de.Z.Item,{label:"\u6E7F\u5EA6",children:"50%"}),(0,e.jsx)(de.Z.Item,{label:"\u5BC6\u5EA6",children:"1.2kg/m\xB3"})]})})]})}))}),(0,e.jsx)(dt.Z,{title:"\u5B9E\u9A8C\u6570\u636E\uFF1A",bordered:!1,extra:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(he.Z,{children:[(0,e.jsx)(Ct.Z,{text:"\u4ECEexcel\u5BFC\u5165",excelTableColumns:ee.rU,isPreview:!1,getExcelData:vt,sheetNum:1}),(0,e.jsx)(Y.Z,{type:"primary",onClick:function(){var E,s;(E=G.current)===null||E===void 0||(s=E.addEditRecord)===null||s===void 0||s.call(E,{key:(Math.random()*1e6).toFixed(0),title:"\u65B0\u7684\u4E00\u884C"})},icon:(0,e.jsx)(_e.Z,{}),children:"\u65B0\u5EFA"}),(0,e.jsx)(Y.Z,{onClick:function(){W.resetFields(),Q(void 0),_(void 0)},children:"\u91CD\u7F6E\u8868\u5355"},"rest")]})}),children:(0,e.jsx)(Xt,{title:ee.NC,dataIndex:ee.Cp,excelTableColumns:ee.rU,defaultData:M,actionRef:G,form:W,setExcelData2:Q,calculate:!1})}),m==null||m.length==0?null:(0,e.jsx)(dt.Z,{title:"\u6362\u7B97\u5230\u6807\u51C6\u72B6\u6001\u4E0B\uFF1A",bordered:!1,extra:(0,e.jsxs)(he.Z,{children:[(0,e.jsx)(Y.Z,{type:"primary",onClick:function(){return we(!0)},children:"\u9884\u89C8\u6027\u80FD\u66F2\u7EBF"}),(0,e.jsx)(Y.Z,{onClick:function(){return Fe(Tt()().format("HH:mm:ss").toString(),ee.NC,ee.Cp,m)},children:"\u5BFC\u51FA\u5F53\u524D\u6570\u636E"})]}),children:(0,e.jsx)(ft.ZP,{search:!1,options:!1,pagination:!1,columns:rt,rowKey:"key",actionRef:J,dataSource:m})}),i?(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(ht.Z,{getPerfData:ye,standardOrExperiment:{standard:!0,setStandardMode:at}})}):null,(0,e.jsx)("div",{className:He().centerButton,children:(0,e.jsxs)(C.Z,{justify:"center",gutter:16,children:[(0,e.jsx)(r.Z,{children:(0,e.jsx)(Y.Z,{style:{marginRight:3},onClick:function(){T("1")},children:"\u4E0A\u4E00\u6B65"})}),(0,e.jsx)(r.Z,{children:(0,e.jsx)(Y.Z,{type:"primary",style:{marginLeft:3},onClick:function(){M.length==0?R.default.warn("\u8BF7\u586B\u5165\u6570\u636E\uFF01"):T("3")},children:"\u4E0B\u4E00\u6B65"})}),H?(0,e.jsx)(r.Z,{children:(0,e.jsx)(Y.Z,{type:"primary",style:{marginLeft:3},onClick:function(E){return ce()},children:"\u4FDD\u5B58\u5E76\u9000\u51FA"})}):null]})})]})},tn=en,Zn=t(43185),bt=t(93009),nn=t(42016),an=t(62918),Ot=t.n(an);function Fn(Pe,c){var T=new FileReader;return T.readAsDataURL(Pe),new Promise(function(m){T.addEventListener("load",function(){return c(m(T.result))})})}var rn="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==",Dt;function ln(){return new Promise(function(Pe){if(Dt===void 0){var c=new Image;c.onload=function(){Dt=c.width===1&&c.height===2,Pe(Dt)},c.src=rn}else Pe(Dt)})}var sn=function(c){return new Promise(function(T,m){Ot().getData(c,function(){try{Ot().getAllTags(c);var _=Ot().getTag(c,"Orientation");T(_)}catch(H){m(H)}})})};function Nt(Pe,c){return new Promise(function(T){var m=new Image;m.src=Pe,m.onload=function(){var _=document.createElement("canvas"),H=this.width/c,ce=this.height/c;_.setAttribute("width",H),_.setAttribute("height",ce),_.getContext("2d").drawImage(this,0,0,H,ce);var G=_.toDataURL("image/jpeg");_.toBlob(function(J){J.size>750*1334?Nt(G,c):T(G)},"image/jpeg")}})}var on=function(c,T){return new Promise(function(m,_){var H=new Image;if(!!c){var ce=c.split(";")[0].split(":")[0],G=1;H.src=c,H.onload=function(){var J=this.width,N=this.height,U=document.createElement("canvas"),W=U.getContext("2d");if(!!W){if(U.width=J,U.height=N,T&&T!==1)switch(T){case 6:U.width=N,U.height=J,W.rotate(Math.PI/2),W.drawImage(this,0,-N,J,N);break;case 3:W.rotate(Math.PI),W.drawImage(this,-J,-N,J,N);break;case 8:U.width=N,U.height=J,W.rotate(3*Math.PI/2),W.drawImage(this,-J,0,J,N);break}else W.drawImage(this,0,0,J,N);m(U.toDataURL(ce,.92))}},H.onerror=function(J){return _(J)}}})},un=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(T){setTimeout(function(){T(!0)},c)})},dn=function(c){var T=c.visible,m=c.uploadedImageFile,_=c.onClose,H=c.imgFileList,ce=c.onSubmit,G=c.title,J=G===void 0?"\u56FE\u7247\u88C1\u526A":G,N=(0,p.useState)(""),U=(0,Z.Z)(N,2),W=U[0],Ue=U[1],fe=(0,p.useRef)(null);(0,p.useEffect)(function(){var ge=new FileReader;ge.onload=function(){var Me=(0,X.Z)((0,x.Z)().mark(function Re(je){var Qe,be,I;return(0,x.Z)().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:if(!je.target){se.next=11;break}return se.prev=1,se.next=4,ln();case 4:Qe=se.sent,Qe?(be=je.target.result,Ue(be)):(I=je.target.result,sn(m).then(function(){var O=(0,X.Z)((0,x.Z)().mark(function M(Q){var te,k;return(0,x.Z)().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.next=2,Nt(I,6);case 2:return te=ue.sent,ue.next=5,on(te,Q);case 5:k=ue.sent,Ue(k);case 7:case"end":return ue.stop()}},M)}));return function(M){return O.apply(this,arguments)}}())),se.next=11;break;case 8:se.prev=8,se.t0=se.catch(1),R.default.error(se.t0);case 11:case"end":return se.stop()}},Re,null,[[1,8]])}));return function(Re){return Me.apply(this,arguments)}}(),ge.readAsDataURL(m)},[m]);var Ne=(0,p.useCallback)(function(){var ge=fe==null?void 0:fe.current,Me=ge==null?void 0:ge.cropper;Me?ce(Me.getCroppedCanvas().toDataURL(),m,H):R.default.error("\u88C1\u526A\u5931\u8D25\uFF01")},[ce]);return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(f.Z,{open:T,title:J,width:"fit-content",onCancel:_,onOk:Ne,children:(0,e.jsx)(nn.Z,{src:W,initialAspectRatio:0,viewMode:1,guides:!0,minCropBoxHeight:300,minCropBoxWidth:300,background:!0,autoCropArea:1,cropBoxMovable:!0,cropBoxResizable:!0,scalable:!1,zoomable:!1,rotatable:!0,dragMode:"move",toggleDragModeOnDblclick:!1,checkOrientation:!1,ref:fe})})})},cn=dn,wt=t(1677),fn=t(59962),mn=t(83360),pn=t(36663),gn=function(c){var T=c.setKey,m=c.imgFileList,_=c.setImgFileList,H=c.buttonVisible,ce=c.setButtonVisible,G=c.fanInfo,J=c.id,N=(0,p.useState)(),U=(0,Z.Z)(N,2),W=U[0],Ue=U[1],fe=(0,p.useState)(""),Ne=(0,Z.Z)(fe,2),ge=Ne[0],Me=Ne[1],Re=(0,p.useState)(!1),je=(0,Z.Z)(Re,2),Qe=je[0],be=je[1],I=(0,p.useState)("\u56FE\u7247\u88C1\u526A"),Te=(0,Z.Z)(I,2),se=Te[0],O=Te[1],M=(0,p.useState)(!1),Q=(0,Z.Z)(M,2),te=Q[0],k=Q[1],De=(0,p.useState)(""),ue=(0,Z.Z)(De,2),ot=ue[0],ut=ue[1],qe=(0,p.useState)(""),at=(0,Z.Z)(qe,2),vt=at[0],Le=at[1],Fe=(0,p.useState)({open:!1,file:{name:""}}),rt=(0,Z.Z)(Fe,2),Ze=rt[0],Je=rt[1],ne=(0,j.tT)("@@initialState"),xe=ne.initialState,F=(0,p.useState)({}),i=(0,Z.Z)(F,2),we=i[0],ye=i[1],P=function(l){if(console.log("changeFile e"),console.log(l),l.file.status==="done")if(l.file.response.message==="OK"){var d=l.file.response.data.fileId;Ue(d),re.default.success({message:"\u4E0A\u4F20\u6210\u529F\uFF01"})}else re.default.error({message:l.file.response.message});else l.file.status==="removed"},E=function(l){return console.log("Upload event:",l),l&&l.fileList},s=function(l){var d=["application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword","application/pdf"];return console.log("checkType"),console.log(l),l.name.split(".").pop()=="dwg"||d.includes(l.type)?!1:(f.Z.error({title:"\u6587\u4EF6\u7C7B\u578B\u9519\u8BEF\uFF0C\u8BF7\u91CD\u65B0\u4E0A\u4F20",content:"\u4EC5\u652F\u6301.doc .docx .pdf\u6587\u4EF6"}),l.status="removed",bt.Z.LIST_IGNORE)},D=function(l){var d=["application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword","application/pdf"];return console.log("checkType"),console.log(l),d.includes(l.type)?!1:(f.Z.error({title:"\u6587\u4EF6\u7C7B\u578B\u9519\u8BEF\uFF0C\u8BF7\u91CD\u65B0\u4E0A\u4F20",content:"\u4EC5\u652F\u6301.doc .docx .pdf\u6587\u4EF6"}),l.status="removed",bt.Z.LIST_IGNORE)},ae=function(l){var d=["application/pdf"],v=["image/png","image/jpg","image/jpeg","image/gif"];return console.log("checkType"),console.log(l),!d.includes(l.type)&&!v.includes(l.type)?(f.Z.error({title:"\u6587\u4EF6\u7C7B\u578B\u9519\u8BEF\uFF0C\u8BF7\u91CD\u65B0\u4E0A\u4F20",content:"\u4EC5\u652F\u6301.pdf .png .jpg .jpeg .gif \u6587\u4EF6"}),l.status="removed",bt.Z.LIST_IGNORE):!1},g=function(){var w=(0,X.Z)((0,x.Z)().mark(function l(d,v){var h,K,S;return(0,x.Z)().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(h=["image/png","image/jpg","image/jpeg","image/gif"],h.includes(d.type)){me.next=5;break}return f.Z.error({title:"\u6587\u4EF6\u7C7B\u578B\u9519\u8BEF\uFF0C\u8BF7\u91CD\u65B0\u4E0A\u4F20",content:"\u4EC5\u652F\u6301.png .jpg .jpeg .gif\u6587\u4EF6"}),d.status="removed",me.abrupt("return",bt.Z.LIST_IGNORE);case 5:K=0;case 6:if(!(K<m.length)){me.next=19;break}S=0;case 8:if(!(S<m[K].length)){me.next=16;break}if(m[K][S].name!=d.name){me.next=13;break}return R.default.error("\u5B58\u5728\u540C\u540D\u56FE\u7247!"),$e(d,v),me.abrupt("return",!1);case 13:S++,me.next=8;break;case 16:K++,me.next=6;break;case 19:return me.next=21,new Promise(function($t,it){var _t=new FileReader;_t.readAsDataURL(d),_t.onload=function(){var Bt=new Image;Bt.src=_t.result,Bt.onload=function(){var Gt=Bt.width,kt=Bt.height;console.log("\u6587\u4EF6\u50CF\u7D20\u5927\u5C0F"),console.log(Gt,kt),(Gt<300||kt<300)&&(R.default.error("\u5BBD\u9AD8\u9700\u8981\u5747\u5927\u4E8E300\u50CF\u7D20"),it("\u56FE\u7247\u5BBD\u9AD8\u9700\u8981\u5747\u5927\u4E8E300\u50CF\u7D20 ")),$t(!0)}}});case 21:return d.uploadIndex=v,Me(d),be(!0),me.abrupt("return",!1);case 25:case"end":return me.stop()}},l)}));return function(d,v){return w.apply(this,arguments)}}(),n=function(l,d){for(var v=l.split(","),h=v[0].match(/:(.*?);/)[1],K=atob(v[1]),S=K.length,oe=new Uint8Array(S);S--;)oe[S]=K.charCodeAt(S);var me=new File([oe],d.name,{type:h});return me.uid=d.uid,me.thumbUrl=l,me},o=(0,p.useCallback)(function(w,l,d){for(var v=n(w,l),h=v.size/1024/1024,K=[],S=0;S<d.length;S++)K.push(d[S]);var oe=[];oe=d[l.uploadIndex],oe.push(v),h<2?(be(!1),d[l.uploadIndex]=oe,_(K),O("\u56FE\u7247\u88C1\u526A")):(K[l.uploadIndex].pop(),R.default.error("\u56FE\u7247\u5927\u5C0F\u5E94\u5C0F\u4E8E 2MB!"),O("\u56FE\u7247\u5927\u5C0F"+(0,le.FE)(h,3)+"MB"),_(K))},[]),b=function(l){return new Promise(function(d,v){var h=new FileReader;h.readAsDataURL(l),h.onload=function(){return d(h.result)},h.onerror=function(K){return v(K)}})},L=function(){var w=(0,X.Z)((0,x.Z)().mark(function l(d){return(0,x.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(console.log("handlePreview file"),console.log(d),d.url&&(d.thumbUrl=d.url),d.originFileObj==null){h.next=10;break}return console.log("file.originFileObj != undefined"),h.next=7,b(d.originFileObj);case 7:d.thumbUrl=h.sent,h.next=15;break;case 10:if(!(!d.thumbUrl&&!d.preview)){h.next=15;break}return console.log("!file.thumbUrl && !file.preview"),h.next=14,b(d);case 14:d.thumbUrl=h.sent;case 15:ut(d.thumbUrl||d.preview),k(!0),Le(d.name||d.thumbUrl.substring(d.thumbUrl.lastIndexOf("/")+1));case 18:case"end":return h.stop()}},l)}));return function(d){return w.apply(this,arguments)}}(),z=function(){var w=(0,X.Z)((0,x.Z)().mark(function l(d){var v,h;return(0,x.Z)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:v=new Image,v.src=d,h=window.open(d),h==null||h.document.write(v.outerHTML);case 4:case"end":return S.stop()}},l)}));return function(d){return w.apply(this,arguments)}}(),$e=function(l,d){for(var v=[],h=0;h<m.length;h++)v[h]=m[h];var K=[];return v[d].forEach(function(S){console.log("img"),console.log(S),S!=l&&K.push(S)}),v[d]=K,console.log("tempImgFileList"),console.log(v),_(v),console.log("onRemove"),!0},Ke=function(l,d){for(var v=[],h=0;h<m.length;h++)h!=d&&(v[h]=m[h]);v[d]=l,_(v)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(ie.Z,{className:He().card,bordered:!1,children:[(0,e.jsxs)(C.Z,{align:"top",justify:"end",children:[(0,e.jsx)(r.Z,{lg:14,md:12,sm:24,children:(0,e.jsx)(wt.Z,{name:"img3d",max:5,label:"\u4E09\u7EF4\u56FE ",labelCol:{span:6},colProps:{span:24},getValueFromEvent:function(l){return m[1][0]},fileList:m[1],fieldProps:{data:{type:"img3d"},beforeUpload:function(l){g(l,1)},onPreview:L,onRemove:function(l){return $e(l,1)},listType:"picture-card"}})}),(0,e.jsx)(r.Z,{lg:10,md:12,sm:24,children:(0,e.jsxs)(dt.Z,{style:{maxWidth:300,color:"#696969"},size:"small",children:[(0,e.jsx)("div",{children:"\u56FE\u7247\u8981\u6C42\uFF1A"}),(0,e.jsx)("div",{children:"1.\u652F\u6301.png .jpg .jpeg .gif\u6587\u4EF6"}),(0,e.jsx)("div",{children:"2.\u56FE\u7247\u5927\u5C0F\u5E94\u5C0F\u4E8E 2MB"}),(0,e.jsx)("div",{children:"3.\u56FE\u7247\u50CF\u7D20\u5BBD\u9AD8\u5747\u5927\u4E8E300px"})]})})]}),(0,e.jsxs)(C.Z,{children:[(0,e.jsx)(r.Z,{lg:11,md:12,sm:24,children:(0,e.jsx)(wt.Z,{name:"aerodynamicSketch",max:2,label:"\u6C14\u52A8\u7565\u56FE",colProps:{span:12},tooltip:"\u8BF7\u4E0A\u4F20\u6C14\u52A8\u7565\u56FE.dwg\u6587\u4EF6\u6216pdf\u6587\u4EF6",getValueFromEvent:function(l){return E(l)},fieldProps:{beforeUpload:s,onPreview:function(){var w=(0,X.Z)((0,x.Z)().mark(function d(v){var h;return(0,x.Z)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(console.log("\u6C14\u52A8\u7565\u56FE"),console.log(v),console.log(v.name.split(".")[1]),v.name.split(".")[1]!="dwg"){S.next=9;break}return R.default.info("\u6682\u4E0D\u652F\u6301dwg\u6587\u4EF6\u9884\u89C8,\u6B63\u5728\u4E0B\u8F7D.."),S.next=7,un(200).then(function(){v.url!=null&&(0,pn.Sv)(v.url)});case 7:S.next=17;break;case 9:if(v.url!=null){S.next=16;break}return S.next=12,b(v.originFileObj);case 12:h=S.sent,v.url=h,S.next=17;break;case 16:Je({open:!0,file:v});case 17:case"end":return S.stop()}},d)}));function l(d){return w.apply(this,arguments)}return l}()}})}),(0,e.jsx)(r.Z,{lg:11,md:12,sm:24,children:(0,e.jsx)(wt.Z,{name:"outlineFile",label:"\u5916\u5F62\u5C3A\u5BF8\u56FE",colProps:{span:12},getValueFromEvent:function(l){return E(l)},fieldProps:{beforeUpload:ae,onPreview:function(){var w=(0,X.Z)((0,x.Z)().mark(function d(v){var h,K;return(0,x.Z)().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(console.log("file"),console.log(v),h=v.name.split(".").pop(),!["png","jpg","jpeg","gif"].includes(h)){oe.next=7;break}L(v),oe.next=14;break;case 7:if(!v){oe.next=14;break}if(v.url!=null){oe.next=14;break}return oe.next=11,b(v.originFileObj);case 11:K=oe.sent,v.url=K,Je({open:!0,file:v});case 14:case"end":return oe.stop()}},d)}));function l(d){return w.apply(this,arguments)}return l}()}})})]}),(0,e.jsx)(C.Z,{children:(0,e.jsx)(r.Z,{lg:11,md:12,sm:24,children:(0,e.jsx)(fn.u,{name:["technicalFile"],label:"\u6280\u672F\u6587\u6863",copyIconProps:!1,min:1,initialValue:[{fileType:"labReport"}],itemContainerRender:function(l){return(0,e.jsx)(tt.ZP.Group,{children:l})},children:function(l,d,v){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ft.Z,{colProps:{span:6},mode:"single",name:"fileType",labelCol:{span:0},placeholder:"\u6587\u4EF6\u7C7B\u578B",options:[{label:"\u5B9E\u9A8C\u62A5\u544A",value:"labReport"},{label:"\u8BBE\u8BA1\u8BF4\u660E\u4E66",value:"designSpecification"}],rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6587\u4EF6\u7C7B\u578B!"}]}),(0,e.jsx)(wt.Z,{name:"file",colProps:{span:12},rules:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u6587\u4EF6"}],getValueFromEvent:function(K){return console.log("getValueFromEvent"),console.log(K),E(K)},fieldProps:{listType:"text",beforeUpload:D,onPreview:function(){var h=(0,X.Z)((0,x.Z)().mark(function S(oe){var me;return(0,x.Z)().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:if(oe.url!=null){it.next=7;break}return it.next=3,b(oe.originFileObj);case 3:me=it.sent,oe.url=me,it.next=8;break;case 7:Je({open:!0,file:oe});case 8:case"end":return it.stop()}},S)}));function K(S){return h.apply(this,arguments)}return K}(),onRemove:function(K){console.log("remove e"),console.log(K)}}}),(0,e.jsx)("div",{style:{display:"flex",alignItems:"flex-end",gap:"8px",height:60}})]})}})})})]}),(0,e.jsx)(f.Z,{centered:!0,open:te,title:vt,footer:null,width:"fit-content",onCancel:function(){return k(!1)},children:(0,e.jsx)("div",{children:(0,e.jsx)("a",{onClick:function(){return z(ot)},children:(0,e.jsx)("img",{alt:"example",src:ot})})})}),Qe&&(0,e.jsx)(cn,{visible:Qe,title:se,uploadedImageFile:ge,onClose:function(){return be(!1)},imgFileList:m,onSubmit:o}),(0,e.jsx)(f.Z,{width:800,title:"\u6587\u4EF6\u9884\u89C8-"+Ze.file.name,open:Ze.open,onCancel:function(){console.log("oncancel"),Je({open:!1,file:{name:"",type:""}})},footer:null,children:(0,e.jsx)(mn.Z,{filename:Ze.file.name,url:Ze.file.url})})]})},hn=gn,Qt=t(36571),vn={labelCol:{span:8},wrapperCol:{span:16}},En=function(c){var T,m=(0,p.useState)("1"),_=(0,Z.Z)(m,2),H=_[0],ce=_[1],G=(0,p.useRef)(),J=Oe.Z.useForm(),N=(0,Z.Z)(J,1),U=N[0],W=(0,p.useState)(0),Ue=(0,Z.Z)(W,2),fe=Ue[0],Ne=Ue[1],ge=(0,p.useState)(!0),Me=(0,Z.Z)(ge,2),Re=Me[0],je=Me[1],Qe=(0,p.useState)([]),be=(0,Z.Z)(Qe,2),I=be[0],Te=be[1],se=(0,p.useState)([]),O=(0,Z.Z)(se,2),M=O[0],Q=O[1],te=(0,p.useState)(),k=(0,Z.Z)(te,2),De=k[0],ue=k[1],ot=(0,p.useState)([[],[],[]]),ut=(0,Z.Z)(ot,2),qe=ut[0],at=ut[1],vt=(0,j.tT)("@@initialState"),Le=vt.initialState;console.log("Fan initialState.currentUser"),console.log(Le==null?void 0:Le.currentUser);var Fe=c.location.query.id;console.log("create id"),console.log(Fe);var rt=function(xe){return new Promise(function(F,i){var we=new FileReader;we.readAsDataURL(xe),we.onload=function(){return F(we.result)},we.onerror=function(ye){return i(ye)}})};(0,p.useMemo)(function(){Fe&&((0,It.LU)(Fe).then(function(){var ne=(0,X.Z)((0,x.Z)().mark(function xe(F){var i,we,ye,P,E,s,D,ae,g,n,o,b,L,z,$e,Ke;return(0,x.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(F){for(F.data.category=[F.data.categoryId,F.data.category],F.data.motorSpeedMin=F.data.motorSpeed,F.data.motorSpeed=void 0,ye=0,P=["aerodynamicSketch","outlineFile"],E=0;E<P.length;E++){for(s=P[E],D=[],ae=0;ae<F.data[s].length;ae++)g=F.data[s][ae],D.push({uid:ye.toString(),url:g,name:g.split("/").pop()}),ye++;D.length==0?F.data[s]=void 0:F.data[s]=D}n=[];for(o in F.data.technicalFile){for(b=F.data.technicalFile[o],L=[],z=0;z<b.length;z++)L.push({uid:ye.toString(),url:b[z],name:b[z].split("/").pop()}),ye++;L.length!=0&&n.push({fileType:o,file:L})}for(F.data.technicalFile=n,console.log("technicalFile"),console.log(n),$e=[],Ke=0;Ke<F.data.img3d.length;Ke++)$e.push({uid:ye.toString(),url:F.data.img3d[Ke],preview:F.data.img3d[Ke],name:F.data.img3d[Ke].split("/").pop()}),ye++;at([[],$e,[]]),F.data.createBy=Le==null||(i=Le.currentUser)===null||i===void 0?void 0:i.userId,Q(F.data),G==null||(we=G.current)===null||we===void 0||we.setFieldsValue(F.data),U==null||U.setFieldsValue(F.data),console.log("res.data"),console.log(F.data)}case 1:case"end":return l.stop()}},xe)}));return function(xe){return ne.apply(this,arguments)}}()),(0,It.Wi)(Fe).then(function(ne){ne&&Te(ne.data)}))},[]);var Ze=function(){var ne=(0,X.Z)((0,x.Z)().mark(function xe(){var F,i,we,ye,P,E,s,D;return(0,x.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,U.validateFields();case 2:F=g.sent,console.log("submit form.getFieldsValue()"),console.log(U.getFieldsValue()),i=F,fe!=0&&(i.flowRate=i.flowRate*Math.pow(60,fe)),i.motorSpeedMin==i.motorSpeed&&(i.motorSpeedMin=void 0),i.motorSpeedMin==null&&i.motorSpeed!=null||(i.motorSpeedMin!=null&&i.motorSpeed==null?(i.motorSpeed=i.motorSpeedMin,i.motorSpeedMin=void 0):i.motorSpeedMin!=null&&i.motorSpeed!=null&&i.motorSpeedMin>i.motorSpeed&&(we=i.motorSpeedMin,i.motorSpeedMin=i.motorSpeed,i.motorSpeed=we)),ye=[];for(P in qe[1])console.log(P),qe[1][P].url!=null?ye[P]=void 0:ye[P]=qe[1][P];i.img3d=qe[1],I.forEach(function(n){for(var o in n)n[o]==null&&(n[o]=void 0)}),i.perfData={header:ee.NC,dataIndex:ee.Cp,data:I},E={\u5B9E\u9A8C\u62A5\u544A:"labReport",\u8BBE\u8BA1\u8BF4\u660E\u4E66:"designSpecification",labReport:"\u5B9E\u9A8C\u62A5\u544A",designSpecification:"\u8BBE\u8BA1\u8BF4\u660E\u4E66"},console.log("params"),console.log(i),i.technicalFile==null?(console.log("!!!!!!!fanInfo"),console.log(M),i.technicalFile=M.technicalFile,i.technicalFile.forEach(function(n){console.log("item"),console.log(n),Object.keys(i).includes(n.fileType)?console.log("includes"):(console.log("not includes"),i[n.fileType]=[]),n.file.forEach(function(o){console.log(o),i[n.fileType].push(o)})}),console.log("1111params"),console.log(i)):(s=i.technicalFile.length==null?[]:i.technicalFile,s.forEach(function(n){console.log("item"),console.log(n),Object.keys(i).includes(n.fileType)?console.log("includes"):(console.log("not includes"),i[n.fileType]=[]),n.file.forEach(function(o){console.log(o),i[n.fileType].push(o)})})),i.aerodynamicSketch==null&&(i.aerodynamicSketch=M.aerodynamicSketch),i.outlineFile==null&&(i.outlineFile=M.outlineFile);for(D in i)i[D]==null&&(i[D]=void 0);Fe?(i.updateBy=i.createBy,i.createBy=void 0,(0,u.DV)(i).then(function(n){if(console.log(n),n.success){var o={actionName:"\u7F16\u8F91\u98CE\u673A\u6570\u636E",actionId:"updateFan",actionType:"\u7F16\u8F91",pageUrl:window.location.href,pageName:"\u98CE\u673A\u5E73\u53F0",element:"\u7F16\u8F91\u98CE\u673A\u6570\u636E"};(0,Qt.yy)({params:o}).catch(function(b){}),re.default.success({message:"\u63D0\u4EA4\u6210\u529F\uFF01"}),j.m8.push("/fan/4")}else console.log(n.msg),re.default.error({message:"\u8BF7\u6C42\u9519\u8BEF ".concat(n.status,":/api/fan/update "),description:n.msg})}).catch(function(n){R.default.error("\u8BF7\u6C42\u5931\u8D25\uFF01")})):(0,u.Jq)(i).then(function(n){if(n.success){var o={actionName:"\u65B0\u5EFA\u98CE\u673A\u6570\u636E",actionId:"createFan",actionType:"\u65B0\u5EFA",pageUrl:window.location.href,pageName:"\u98CE\u673A\u5E73\u53F0",element:"\u65B0\u5EFA\u98CE\u673A\u6570\u636E"};(0,Qt.yy)({params:o}).catch(function(b){}),re.default.success({message:"\u63D0\u4EA4\u6210\u529F\uFF01"}),j.m8.push("/fan/4")}else re.default.error({message:"\u8BF7\u6C42\u9519\u8BEF ".concat(n.status,":/api/fan/add "),description:n.msg})}).catch(function(n){R.default.error("\u8BF7\u6C42\u5931\u8D25\uFF01")});case 22:case"end":return g.stop()}},xe)}));return function(){return ne.apply(this,arguments)}}(),Je=[{key:"1",label:(0,e.jsxs)(he.Z,{children:[(0,e.jsx)(V.Z,{color:H=="1"?"#1890ff":"#00000040",count:"1",style:{marginBottom:2}}),"\u57FA\u672C\u4FE1\u606F",(0,e.jsx)(ve.Z,{})]}),disabled:!Fe,children:(0,e.jsx)(Kt,{setKey:ce,formRef:G,form:U,flowRateUnit:fe,setFlowRateUnit:Ne,model:Fe,onSubmit:Ze})},{key:"2",label:(0,e.jsxs)(he.Z,{children:[(0,e.jsx)(V.Z,{color:H=="2"?"#1890ff":"#00000040",count:"2",style:{marginBottom:2}}),"\u6027\u80FD\u66F2\u7EBF",(0,e.jsx)(ve.Z,{})]}),disabled:!Fe,children:(0,e.jsx)(tn,{setKey:ce,standardStatusData:I,setStandardStatusData:Te,id:Fe,onSubmit:Ze})},{key:"3",label:(0,e.jsxs)(he.Z,{children:[(0,e.jsx)(V.Z,{color:H=="3"?"#1890ff":"#00000040",count:"3",style:{marginBottom:2}}),"\u9644\u4EF6\u4E0A\u4F20",(0,e.jsx)(ve.Z,{})]}),disabled:!Fe,children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(hn,{setKey:ce,imgFileList:qe,setImgFileList:at,buttonVisible:Re,setButtonVisible:je,fanInfo:M,setFanInfo:Q,id:Fe}),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(C.Z,{children:(0,e.jsx)(r.Z,{lg:11,md:12,sm:24,children:(0,e.jsx)(q.Z,{name:"createBy",label:"\u4E0A\u4F20\u8005ID",initialValue:Le==null||(T=Le.currentUser)===null||T===void 0?void 0:T.userId,disabled:!0})})}),(0,e.jsxs)("div",{className:He().centerButton,children:[(0,e.jsx)(Y.Z,{style:{marginRight:3},onClick:function(){ce("2")},children:"\u4E0A\u4E00\u6B65"}),(0,e.jsx)(Y.Z,{type:"primary",style:{marginLeft:3},onClick:Ze,children:"\u63D0\u4EA4"})]})]})]})}];return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(tt.ZP,(0,B.Z)((0,B.Z)({layout:"horizontal"},vn),{},{form:U,formRef:G,submitter:!1,children:(0,e.jsx)(ie.Z,{className:He().card,bordered:!1,children:(0,e.jsx)(ke.Z,{activeKey:H,centered:!0,onTabScroll:function(xe){},onTabClick:function(xe){console.log(xe),ce(xe)},type:"line",items:Je,tabBarExtraContent:(0,e.jsx)(Y.Z,{onClick:function(){j.m8.push("/fan/".concat(4))},children:(0,e.jsx)(Zt.Z,{style:{color:"rgb(24, 144, 255)",fontSize:24}})})})})}))})},jn=En},85581:function(We,Ge,t){"use strict";t.d(Ge,{pw:function(){return Be},we:function(){return Ce},Jg:function(){return Ie},bK:function(){return x},Jq:function(){return Z},DV:function(){return Zt}});var B=t(39428),Ae=t(3182),ie=t(21010);function et(){return ke.apply(this,arguments)}function ke(){return ke=_asyncToGenerator(_regeneratorRuntime().mark(function j(){return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("/imip/methods/category",{method:"GET"}));case 1:case"end":return a.stop()}},j)})),ke.apply(this,arguments)}function lt(j,u){return Y.apply(this,arguments)}function Y(){return Y=_asyncToGenerator(_regeneratorRuntime().mark(function j(u,a){return _regeneratorRuntime().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return console.log(u,a),A.abrupt("return",request("/imip/methods/add?status=".concat(a),{method:"POST",data:_objectSpread({},u)}));case 2:case"end":return A.stop()}},j)})),Y.apply(this,arguments)}function Et(){return C.apply(this,arguments)}function C(){return C=_asyncToGenerator(_regeneratorRuntime().mark(function j(){return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("/imip/case/connection",{method:"GET"}));case 1:case"end":return a.stop()}},j)})),C.apply(this,arguments)}function jt(){return r.apply(this,arguments)}function r(){return r=_asyncToGenerator(_regeneratorRuntime().mark(function j(){return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("/imip/knowledge/connection",{method:"GET"}));case 1:case"end":return a.stop()}},j)})),r.apply(this,arguments)}function $(j){return he.apply(this,arguments)}function he(){return he=_asyncToGenerator(_regeneratorRuntime().mark(function j(u){return _regeneratorRuntime().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",request("/imip/methods",{method:"GET",params:u}));case 1:case"end":return f.stop()}},j)})),he.apply(this,arguments)}function Be(){return V.apply(this,arguments)}function V(){return V=(0,Ae.Z)((0,B.Z)().mark(function j(){return(0,B.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,ie.WY)("/api/fan/category/all",{method:"GET"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},j)})),V.apply(this,arguments)}function Ce(){return R.apply(this,arguments)}function R(){return R=(0,Ae.Z)((0,B.Z)().mark(function j(){return(0,B.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,ie.WY)("/api/fan/category/group",{method:"GET"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},j)})),R.apply(this,arguments)}function Ie(){return re.apply(this,arguments)}function re(){return re=(0,Ae.Z)((0,B.Z)().mark(function j(){return(0,B.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,ie.WY)("/api/fan/appl/all",{method:"GET"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},j)})),re.apply(this,arguments)}function x(){return X.apply(this,arguments)}function X(){return X=(0,Ae.Z)((0,B.Z)().mark(function j(){return(0,B.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,ie.WY)("/api/fan/cool/all",{method:"GET"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},j)})),X.apply(this,arguments)}function Ye(j){return Oe.apply(this,arguments)}function Oe(){return Oe=_asyncToGenerator(_regeneratorRuntime().mark(function j(u){return _regeneratorRuntime().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",request(`/api/fan/add?
  applicationModel=`.concat(u.applicationModel,`
  &category=`).concat(u.category,`
  &model=`).concat(u.model,`
  &coolObject=`).concat(u.coolObject,`
  &flowRate=`).concat(u.flowRate,`
  &shaftPower=`).concat(u.shaftPower,`
  `),{method:"POST",body:u}));case 1:case"end":return f.stop()}},j)})),Oe.apply(this,arguments)}function Z(j){return ve.apply(this,arguments)}function ve(){return ve=(0,Ae.Z)((0,B.Z)().mark(function j(u){var a,f;return(0,B.Z)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return a=ze(u),y.next=3,fetch("/api/fan/add",{method:"POST",body:a});case 3:return f=y.sent,y.next=6,f.json();case 6:return y.abrupt("return",y.sent);case 7:case"end":return y.stop()}},j)})),ve.apply(this,arguments)}function Zt(j){return p.apply(this,arguments)}function p(){return p=(0,Ae.Z)((0,B.Z)().mark(function j(u){var a,f;return(0,B.Z)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return a=ze(u),console.log("request1 formData.get('outlineFile')"),console.log(a.get("img3d")),console.log(a.get("outlineFile")),y.next=6,fetch("/api/fan/update",{method:"POST",body:a});case 6:return f=y.sent,y.next=9,f.json();case 9:return y.abrupt("return",y.sent);case 10:case"end":return y.stop()}},j)})),p.apply(this,arguments)}function tt(j,u){return q.apply(this,arguments)}function q(){return q=_asyncToGenerator(_regeneratorRuntime().mark(function j(u,a){return _regeneratorRuntime().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.abrupt("return",request("/api/perf/add",{method:"POST",data:{model:u,perfData:a}}));case 1:case"end":return A.stop()}},j)})),q.apply(this,arguments)}var ze=function(u){var a=new FormData;return Object.keys(u).forEach(function(f){if(Array.isArray(u[f])){console.log("Array.isArray( "+f+") "),console.log(u[f]);for(var A=0;A<u[f].length;A++)if(u[f][A].originFileObj!=null)a.append(f,u[f][A].originFileObj);else if(typeof u[f][A]=="object"&&u[f][A].url!=null){console.log("url != undefined");var y=new File([u[f][A].url],"file.origin");a.append(f,y)}else typeof u[f][A]=="object"&&u[f][A].uid!=null?a.append(f,u[f][A]):typeof u[f][A]=="object"?a.append(f,JSON.stringify(u[f][A])):a.append(f,u[f][A])}else typeof u[f]=="object"?a.append(f,JSON.stringify(u[f])):u[f]!=null&&a.append(f,u[f])}),a};function He(j){var u={};return j.forEach(function(a,f){return u[f]=a}),u}},36663:function(We,Ge,t){"use strict";t.d(Ge,{Sv:function(){return jt}});var B=t(34792),Ae=t(48086),ie=t(39428),et=t(3182),ke=t(30381),lt=t.n(ke),Y=t(21010);function Et(Be){return C.apply(this,arguments)}function C(){return C=(0,et.Z)((0,ie.Z)().mark(function Be(V){return(0,ie.Z)().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return V=V+"?v="+lt()(),R.abrupt("return",(0,Y.WY)("/api/download/".concat(V),{method:"GET",responseType:"blob"}));case 2:case"end":return R.stop()}},Be)})),C.apply(this,arguments)}function jt(Be){return r.apply(this,arguments)}function r(){return r=(0,et.Z)((0,ie.Z)().mark(function Be(V){return(0,ie.Z)().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:console.log("downloadFile path"),V.indexOf("/api/download/")==0&&(V=V.substring(14)),Et(V).then(function(Ie){var re=V.split("/").pop();if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(Ie,re);else{var x=document.createElement("a"),X=document.createEvent("MouseEvents");x.style.display="none",x.href=window.URL.createObjectURL(Ie),x.download=re,document.body.appendChild(x),X.initEvent("click",!1,!1),x.dispatchEvent(X),document.body.removeChild(x)}}).catch(function(){Ae.default.error("\u4E0B\u8F7D\u51FA\u9519!")});case 3:case"end":return R.stop()}},Be)})),r.apply(this,arguments)}function $(){return he.apply(this,arguments)}function he(){return he=_asyncToGenerator(_regeneratorRuntime().mark(function Be(){var V,Ce,R=arguments;return _regeneratorRuntime().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return V=R.length>0&&R[0]!==void 0?R[0]:{},Ce=request("/api/download",{method:"POST",data:V,responseType:"blob"}),console.log(Ce),re.abrupt("return",Ce);case 4:case"end":return re.stop()}},Be)})),he.apply(this,arguments)}},20067:function(){}}]);
